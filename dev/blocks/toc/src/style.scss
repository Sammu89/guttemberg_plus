/**
 * TOC Block - Frontend Styles
 *
 * Provides core styling for table of contents functionality.
 * Uses CSS custom properties for theming support (3-tier cascade).
 *
 * @package
 * @since 1.0.0
 */

@use 'toc_variables';

/* Reset all heading margins */
.gutplus-toc {
	h1, h2, h3, h4, h5, h6 {
		margin: 0 !important;
	}
}

/* Block wrapper */
.gutplus-toc {
	background-color: var(--toc-wrapper-background-color, #ffffff);
	border: var(--toc-border-width, 1px) var(--toc-border-style, solid) var(--toc-border-color, #dddddd);
	border-radius: var(--toc-border-radius, 0.25rem 0.25rem 0.25rem 0.25rem);
	padding: var(--toc-wrapper-padding, 1.25rem);
	box-shadow: var(--toc-border-shadow, none);
	overflow: hidden;
	transition: box-shadow 0.2s ease;
	margin: 1em 0;

	&:hover {
		box-shadow: var(--toc-border-shadow-hover, none);
	}

	// Alignment classes
	&.gutplus-align-left {
		margin-left: 0 !important;
		margin-right: auto !important;
	}

	&.gutplus-align-center {
		margin-left: auto !important;
		margin-right: auto !important;
	}

	&.gutplus-align-right {
		margin-left: auto !important;
		margin-right: 0 !important;
	}
}

/* Title */
.toc-title {
	color: var(--toc-title-color, #333333);
	background-color: var(--toc-title-background-color, transparent);
	font-size: var(--toc-title-font-size, 1.25rem);
	font-weight: var(--toc-title-font-weight, 700);
	text-align: var(--toc-title-alignment, left);
	padding: 0.75rem;
	margin: 0 0 1rem 0;
}

/* Toggle button (collapsible) */
.toc-toggle-button {
	width: 100%;
	background: none;
	border: none;
	cursor: pointer;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: background-color 0.2s ease;

	&.toc-icon-only {
		font-size: var(--toc-collapse-icon-size, 1.25rem);
		color: var(--toc-collapse-icon-color, #666666);
	}

	&:hover {
		background-color: rgba(0, 0, 0, 0.05);
	}

	&:focus {
		outline: 2px solid #007cba;
		outline-offset: -2px;
	}
}

/* Collapse icon */
.toc-collapse-icon {
	font-size: var(--toc-collapse-icon-size, 1.25rem);
	color: var(--toc-collapse-icon-color, #666666);
	transition: transform 0.3s ease;
}

.toc-toggle-button[aria-expanded="false"] .toc-collapse-icon {
	transform: rotate(-90deg);
}

/* TOC content container */
.toc-content {
	padding: 0;
}

/* TOC list */
.toc-list {
	list-style-type: disc;
	margin: 0;
	padding: 0 0 0 var(--toc-list-padding-left, 1.5rem);
}

/* TOC list items */
.toc-item {
	margin-bottom: var(--toc-item-spacing, 0.5rem);
	line-height: 1.6;
}

/* Nested levels within TOC list */
.toc-list ul {
	padding-left: var(--toc-level-indent, 1.25rem);
	margin-top: 0.5rem;
}

/* Numbering styles */
.toc-list.numbering-decimal {
	list-style-type: decimal;

	ul {
		list-style-type: decimal;
	}
}

.toc-list.numbering-roman {
	list-style-type: upper-roman;

	ul {
		list-style-type: lower-roman;
	}
}

.toc-list.numbering-alpha {
	list-style-type: upper-alpha;

	ul {
		list-style-type: lower-alpha;
	}
}

.toc-list.numbering-none {
	list-style-type: none;
	padding-left: 0;

	ul {
		list-style-type: none;
		padding-left: var(--toc-level-indent, 1.25rem);
	}
}

/* TOC links */
.toc-link {
	color: var(--toc-link-color, #0073aa);
	text-decoration: none;
	transition: color 0.2s ease;

	&:hover {
		color: var(--toc-link-hover-color, #005177);
		text-decoration: underline;
	}

	&:visited {
		color: var(--toc-link-visited-color, #0073aa);
	}

	&:active {
		color: var(--toc-link-active-color, #005177);
	}

	&.active {
		font-weight: bold;
		color: var(--toc-link-active-color, #005177);
	}
}

/* Heading-level-specific styling (H1-H6) */
.toc-h1 {
	font-size: var(--toc-h1-font-size, 1.5rem);
	font-weight: var(--toc-h1-font-weight, 700);
	font-style: var(--toc-h1-font-style, normal);
	text-transform: var(--toc-h1-text-transform, none);
	text-decoration: var(--toc-h1-text-decoration, none);

	.toc-link {
		color: var(--toc-h1-color, #0073aa);
	}
}

.toc-h2 {
	font-size: var(--toc-h2-font-size, 1.25rem);
	font-weight: var(--toc-h2-font-weight, 600);
	font-style: var(--toc-h2-font-style, normal);
	text-transform: var(--toc-h2-text-transform, none);
	text-decoration: var(--toc-h2-text-decoration, none);

	.toc-link {
		color: var(--toc-h2-color, #0073aa);
	}
}

.toc-h3 {
	font-size: var(--toc-h3-font-size, 1.125rem);
	font-weight: var(--toc-h3-font-weight, 500);
	font-style: var(--toc-h3-font-style, normal);
	text-transform: var(--toc-h3-text-transform, none);
	text-decoration: var(--toc-h3-text-decoration, none);

	.toc-link {
		color: var(--toc-h3-color, #0073aa);
	}
}

.toc-h4 {
	font-size: var(--toc-h4-font-size, 1rem);
	font-weight: var(--toc-h4-font-weight, normal);
	font-style: var(--toc-h4-font-style, normal);
	text-transform: var(--toc-h4-text-transform, none);
	text-decoration: var(--toc-h4-text-decoration, none);

	.toc-link {
		color: var(--toc-h4-color, #0073aa);
	}
}

.toc-h5 {
	font-size: var(--toc-h5-font-size, 0.9375rem);
	font-weight: var(--toc-h5-font-weight, normal);
	font-style: var(--toc-h5-font-style, normal);
	text-transform: var(--toc-h5-text-transform, none);
	text-decoration: var(--toc-h5-text-decoration, none);

	.toc-link {
		color: var(--toc-h5-color, #0073aa);
	}
}

.toc-h6 {
	font-size: var(--toc-h6-font-size, 0.875rem);
	font-weight: var(--toc-h6-font-weight, normal);
	font-style: var(--toc-h6-font-style, normal);
	text-transform: var(--toc-h6-text-transform, none);
	text-decoration: var(--toc-h6-text-decoration, none);

	.toc-link {
		color: var(--toc-h6-color, #0073aa);
	}
}

/* Numbering prefix color */
.toc-list.numbering-decimal li::marker,
.toc-list.numbering-roman li::marker,
.toc-list.numbering-alpha li::marker {
	color: var(--toc-numbering-color, #0073aa);
}

/* Position types */
.toc-position-default {
	position: static;
}

.toc-position-sticky {
	position: sticky;
	top: var(--toc-position-top, 6.25rem);
	z-index: var(--toc-z-index, 100);
}

.toc-position-fixed {
	position: fixed;
	top: var(--toc-position-top, 6.25rem);
	max-width: var(--toc-max-width, 18.75rem);
	z-index: var(--toc-z-index, 100);

	/* Horizontal positioning - set via inline styles based on positionHorizontalSide */
	/* Default to right if no inline style is set */
	&:not([style*="left:"]):not([style*="right:"]) {
		right: 1.25rem;
	}
}

/* Horizontal side selectors for validation/consistency */
.gutplus-toc[data-position-horizontal-side="left"] {
	left: var(--toc-position-horizontal-offset, auto);
	right: auto;
}

.gutplus-toc[data-position-horizontal-side="right"] {
	right: var(--toc-position-horizontal-offset, auto);
	left: auto;
}

/* Placeholder (before JS loads) */
.toc-placeholder {
	color: #999;
	font-style: italic;
}

/* Accessibility - Reduced motion */
@media (prefers-reduced-motion: reduce) {

	.toc-toggle-button,
	.toc-collapse-icon,
	.toc-link {
		transition: none !important;
	}
}
