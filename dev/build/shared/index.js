(()=>{"use strict";var e={87:e=>{e.exports=window.wp.element},143:e=>{e.exports=window.wp.data},427:e=>{e.exports=window.wp.components},609:e=>{e.exports=window.React}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=o(143);const s=window.wp.apiFetch;var n=o.n(s);const l="gutenberg-blocks/themes",a={accordionThemes:{},tabsThemes:{},tocThemes:{},themesLoaded:{accordion:!1,tabs:!1,toc:!1},isLoading:!1,error:null},c="SET_THEMES",d="SET_LOADING",E="SET_ERROR",m="THEME_CREATED",T="THEME_UPDATED",i="THEME_DELETED",h="THEME_RENAMED";function y(e){return`${e}Themes`}const g={*loadThemes(e){yield g.setLoading(!0),yield g.setError(null);try{const t=yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}`,method:"GET"}};return{type:c,blockType:e,themes:t}}catch(e){return yield g.setError(e.message),{type:"LOAD_THEMES_ERROR"}}finally{yield g.setLoading(!1)}},*createTheme(e,t,o){console.log("[REDUX ACTION] ========== CREATE THEME STARTED =========="),console.log("[REDUX ACTION] Timestamp:",(new Date).toISOString()),console.log("[REDUX ACTION] Block type:",e),console.log("[REDUX ACTION] Theme name:",t),console.log("[REDUX ACTION] Values count:",Object.keys(o).length),yield g.setLoading(!0),yield g.setError(null);try{console.log("[REDUX ACTION] Sending POST request to API...");const r=yield{type:"API_FETCH",request:{path:"/gutenberg-blocks/v1/themes",method:"POST",data:{blockType:e,name:t,values:o}}};console.log("[REDUX ACTION] API response received!"),console.log("[REDUX ACTION] Theme returned:",r);const s={type:m,blockType:e,theme:r};return console.log("[REDUX ACTION] Dispatching THEME_CREATED to reducer..."),console.log("[REDUX ACTION] ============================================"),s}catch(e){throw console.error("[REDUX ACTION] ERROR creating theme:",e),yield g.setError(e.message),e}finally{yield g.setLoading(!1)}},*updateTheme(e,t,o){yield g.setLoading(!0),yield g.setError(null);try{const r=yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}`,method:"PUT",data:{values:o}}};return{type:T,blockType:e,theme:r}}catch(e){throw yield g.setError(e.message),e}finally{yield g.setLoading(!1)}},*deleteTheme(e,t){yield g.setLoading(!0),yield g.setError(null);try{return yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}`,method:"DELETE"}},{type:i,blockType:e,themeName:t}}catch(e){throw yield g.setError(e.message),e}finally{yield g.setLoading(!1)}},*renameTheme(e,t,o){yield g.setLoading(!0),yield g.setError(null);try{return yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}/rename`,method:"POST",data:{newName:o}}},{type:h,blockType:e,oldName:t,newName:o}}catch(e){throw yield g.setError(e.message),e}finally{yield g.setLoading(!1)}},setLoading:e=>({type:d,isLoading:e}),setError:e=>({type:E,error:e})},p={getThemes:(e,t)=>e[y(t)]||{},getTheme:(e,t,o)=>p.getThemes(e,t)[o]||null,hasTheme:(e,t,o)=>null!==p.getTheme(e,t,o),isLoading:e=>e.isLoading,getError:e=>e.error,areThemesLoaded:(e,t)=>e.themesLoaded?.[t]||!1,getThemeNames(e,t){const o=p.getThemes(e,t);return Object.keys(o)}},u={API_FETCH:({request:e})=>n()(e)},R=(0,r.createReduxStore)(l,{reducer:(e=a,t)=>{switch(t.type){case c:{const o=y(t.blockType);return{...e,[o]:t.themes,themesLoaded:{...e.themesLoaded,[t.blockType]:!0}}}case d:return{...e,isLoading:t.isLoading};case E:return{...e,error:t.error};case m:{const o=y(t.blockType);if(console.log("[REDUX STORE] ========== THEME_CREATED REDUCER =========="),console.log("[REDUX STORE] Timestamp:",(new Date).toISOString()),console.log("[REDUX STORE] Block type:",t.blockType),console.log("[REDUX STORE] State key:",o),console.log("[REDUX STORE] Theme name:",t.theme?.name),console.log("[REDUX STORE] Previous themes:",Object.keys(e[o]||{})),!t.theme||!t.theme.name)return console.error("[REDUX STORE] ERROR: Invalid theme object",t),e;const r={...e,[o]:{...e[o],[t.theme.name]:t.theme}};return console.log("[REDUX STORE] New themes list:",Object.keys(r[o])),console.log("[REDUX STORE] Theme successfully added to store!"),console.log("[REDUX STORE] ================================================"),r}case T:{const o=y(t.blockType);return t.theme&&t.theme.name?{...e,[o]:{...e[o],[t.theme.name]:t.theme}}:(console.error("[Theme Store] THEME_UPDATED: Invalid theme object",t),e)}case i:{const o=y(t.blockType),r={...e[o]};return delete r[t.themeName],{...e,[o]:r}}case h:{const o=y(t.blockType),r={...e[o]},s=r[t.oldName];return delete r[t.oldName],r[t.newName]={...s,name:t.newName},{...e,[o]:r}}default:return e}},actions:g,selectors:p,controls:u});if(!wp.data.select(l))try{(0,r.register)(R)}catch(e){throw console.error("[Theme Store] Registration error:",e),e}new Set,o(609),o(427),o(87),window.ReactDOM})();