(()=>{"use strict";const t={tablet:768,mobile:481};let e,n=null;function i(){const e=document.querySelectorAll(".gutplus-toc");if(!e||0===e.length)return;const i=window.guttembergPlusSettings?.breakpoints||t,l=function(t,e){return t<=e.mobile?"mobile":t<=e.tablet?"tablet":"global"}(window.innerWidth,i);l!==n&&(n=l,e.forEach(t=>{t.setAttribute("data-gutplus-device",l)}))}function l(){const t=document.querySelectorAll(".gutplus-toc");t&&0!==t.length&&t.forEach(t=>{try{if(!t)return;const e=t.getAttribute("data-toc-id");if(!e)return;const n={tocId:e,filterMode:t.getAttribute("data-filter-mode")||"include-all",includeLevels:(t.getAttribute("data-include-levels")||"2,3,4,5,6").split(",").map(Number),includeClasses:t.getAttribute("data-include-classes")||"",excludeLevels:(t.getAttribute("data-exclude-levels")||"").split(",").map(Number).filter(Boolean),excludeClasses:t.getAttribute("data-exclude-classes")||"",depthLimit:parseInt(t.getAttribute("data-depth-limit")||"0",10)||null,includeAccordions:"false"!==t.getAttribute("data-include-accordions"),includeTabs:"false"!==t.getAttribute("data-include-tabs"),h1NumberingStyle:t.getAttribute("data-h1-numbering")||"decimal",h2NumberingStyle:t.getAttribute("data-h2-numbering")||"decimal",h3NumberingStyle:t.getAttribute("data-h3-numbering")||"decimal",h4NumberingStyle:t.getAttribute("data-h4-numbering")||"decimal",h5NumberingStyle:t.getAttribute("data-h5-numbering")||"decimal",h6NumberingStyle:t.getAttribute("data-h6-numbering")||"decimal",smoothScroll:"true"===t.getAttribute("data-smooth-scroll"),scrollOffset:parseInt(t.getAttribute("data-scroll-offset")||"0",10),autoHighlight:"true"===t.getAttribute("data-auto-highlight"),isCollapsible:"true"===t.getAttribute("data-collapsible"),initiallyCollapsed:"true"===t.getAttribute("data-initially-collapsed"),clickBehavior:t.getAttribute("data-click-behavior")||"navigate",enableHierarchicalIndent:"true"===t.getAttribute("data-enable-hierarchical-indent"),levelIndent:t.getAttribute("data-level-indent")||"1.25rem",showIcon:"false"!==t.getAttribute("data-show-icon"),iconClosed:t.getAttribute("data-icon-closed")||"▾",iconOpen:t.getAttribute("data-icon-open")||"none",iconRotation:parseInt(t.getAttribute("data-icon-rotation")||"180",10),includeH1:"false"!==t.getAttribute("data-include-h1"),includeH2:"false"!==t.getAttribute("data-include-h2"),includeH3:"false"!==t.getAttribute("data-include-h3"),includeH4:"false"!==t.getAttribute("data-include-h4"),includeH5:"false"!==t.getAttribute("data-include-h5"),includeH6:"false"!==t.getAttribute("data-include-h6")};!function(t,e){if(t&&e)try{const n=function(t){if(!t)return[];const e=t.getAttribute("data-toc-items");if(!e)return[];try{const t=decodeURIComponent(e),n=JSON.parse(t);if(Array.isArray(n))return n.filter(t=>!t.hidden).map((t,e)=>{const n=t.anchor||t.id||`heading-${e}`;return{anchor:n,id:n,text:t.text||"",level:t.level||2}}).filter(t=>t.id)}catch(t){}return[]}(t),i=function(t,e){const n=document.querySelector(".entry-content, .post-content, .page-content, article .content, main.content, .site-content article");if(!n)return[];const i=[];if(["h1","h2","h3","h4","h5","h6"].forEach(t=>{!1!==e[`include${t.toUpperCase()}`]&&i.push(t)}),0===i.length)return[];const l=n.querySelectorAll(i.join(", ")),r=[];if(l.forEach(t=>{if(t.closest(".gutplus-toc"))return;if(t.closest("header, footer, nav, aside, .sidebar, .widget"))return;const n=parseInt(t.tagName.charAt(1),10),i=t.classList.contains("accordion-heading"),l=t.classList.contains("tab-heading");if(i&&!e.includeAccordions)return;if(l&&!e.includeTabs)return;let a="";const c=t.querySelector(".accordion-title-text, .tab-button-text");a=c?c.textContent.trim():t.textContent.trim();const o=t.id||"",s=Array.from(t.classList);(function(t,e){const{filterMode:n,includeClasses:i,excludeClasses:l}=e;return"Include by class"===n?!!i&&i.split(",").some(e=>t.classes.includes(e.trim())):"Excluse by class"!==n||(!l||!l.split(",").some(e=>t.classes.includes(e.trim())))})({level:n,classes:s},e)&&r.push({level:n,text:a,id:o,classes:s,element:t})}),e.depthLimit){const t=Math.min(...r.map(t=>t.level));return r.filter(n=>n.level-t<e.depthLimit)}return r}(0,e),l=n&&n.length>0?function(t,e,n){if(!Array.isArray(t)||0===t.length)return e||[];const i=Array.isArray(e)?e:[],l=new Map;i.forEach(t=>{t&&t.id&&l.set(t.id,t)});const a=new Set;return t.map((t,e)=>{const c=t.anchor||t.id||`heading-${n?.tocId||"toc"}-${e}`;let o=l.get(c);return o||(o=i.find(e=>!(a.has(e)||t.level&&e.level!==t.level||r(e.text)!==r(t.text)))),o?(a.add(o),o.element&&o.element.id!==c&&(o.element.id=c),{...o,id:c}):{level:t.level||2,text:t.text||"",id:c,element:null}})}(n,i,e):i;if(!l)return;l.forEach((t,n)=>{try{t&&t.element&&!t.element.id&&(t.element.id=`heading-${e.tocId}-${n}`,t.id=t.element.id)}catch(t){}});const a=t.querySelector(".toc-list");if(a)try{!function(t,e,n){t.innerHTML="",t.style.setProperty("--toc-h1-numbering",n.h1NumberingStyle||"decimal"),t.style.setProperty("--toc-h2-numbering",n.h2NumberingStyle||"decimal"),t.style.setProperty("--toc-h3-numbering",n.h3NumberingStyle||"decimal"),t.style.setProperty("--toc-h4-numbering",n.h4NumberingStyle||"decimal"),t.style.setProperty("--toc-h5-numbering",n.h5NumberingStyle||"decimal"),t.style.setProperty("--toc-h6-numbering",n.h6NumberingStyle||"decimal"),t.classList.add("toc-hierarchical-numbering"),t.setAttribute("data-h1-numbering",n.h1NumberingStyle||"decimal"),t.setAttribute("data-h2-numbering",n.h2NumberingStyle||"decimal"),t.setAttribute("data-h3-numbering",n.h3NumberingStyle||"decimal"),t.setAttribute("data-h4-numbering",n.h4NumberingStyle||"decimal"),t.setAttribute("data-h5-numbering",n.h5NumberingStyle||"decimal"),t.setAttribute("data-h6-numbering",n.h6NumberingStyle||"decimal");let i=e.length>0?Math.min(...e.map(t=>t.level||6)):1;if("none"===(n.h1NumberingStyle||"decimal")&&i<=1&&(i=2),t.setAttribute("data-base-level",i),0===e.length)return void(t.innerHTML='<li class="toc-empty">No headings found.</li>');const l=document.createDocumentFragment(),r=n&&n.enableHierarchicalIndent,a=n&&n.levelIndent||"1.25rem",c=[];let o=null;e.forEach(t=>{const e=document.createElement("li");e.className=`toc-item toc-h${t.level}`;let n=0;if(r){if(null===o)n=0,c.push(t.level);else if(t.level>o)n=c.length,c.push(t.level);else if(t.level===o)n=c.length-1;else{for(;c.length>0&&c[c.length-1]>=t.level;)c.pop();n=c.length,c.push(t.level)}o=t.level}else n=t.level-1;n>0&&(e.style.paddingLeft=`calc(${n} * ${a})`);const i=document.createElement("a");i.href=`#${t.id}`,i.className="toc-link",i.textContent=t.text,i.setAttribute("data-heading-id",t.id),e.appendChild(i),l.appendChild(e)}),t.appendChild(l)}(a,l,e)}catch(t){}if(e.smoothScroll)try{!function(t,e){if(!t||!e)return;const n=t.querySelectorAll(".toc-link");n&&0!==n.length&&n.forEach(n=>{n&&n.addEventListener("click",i=>{try{i.preventDefault();const l=n.getAttribute("href");if(!l||l.length<=1)return;const r=l.slice(1),a=document.getElementById(r);if(!a)return;const c=function(t){if(!t)return!1;let e=!1;const n=t.closest(".gutplus-accordion");if(n){const t=n.querySelector(".accordion-title"),i=n.querySelector(".accordion-content");t&&i&&("true"===t.getAttribute("aria-expanded")||(t.click(),e=!0))}let i=null;return t.classList&&t.classList.contains("tab-button")?i=t:t.closest&&t.closest(".tab-heading")?i=t.closest(".tab-heading").querySelector(".tab-button"):t.querySelector&&(i=t.querySelector(".tab-button")),i&&("true"===i.getAttribute("aria-selected")||(i.click(),e=!0)),e}(a),o=()=>{let t=a;const n=a.classList&&a.classList.contains("tab-button"),i=a.closest&&a.closest(".tab-heading");if(n||i){const e=a.closest(".gutplus-tabs");e&&(t=e)}const l=a.closest&&a.closest(".accordion-heading"),r=a.classList&&a.classList.contains("accordion-title");if(l||r){const e=a.closest(".gutplus-accordion");e&&(t=e)}const c=t.getBoundingClientRect().top+window.pageYOffset-e.scrollOffset;window.scrollTo({top:c,behavior:"smooth"})};c?setTimeout(o,50):o(),history.pushState?history.pushState(null,null,`#${r}`):window.location.hash=r,a.focus({preventScroll:!0}),"navigate-and-collapse"===e.clickBehavior&&e.isCollapsible&&e.showIcon&&setTimeout(()=>{try{const e=t.querySelector(".toc-toggle-button"),n=t.querySelector(".toc-content"),i=t.querySelector(".toc-icon");if(e&&n&&(n.setAttribute("hidden","true"),e.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),i)){const t=e.getAttribute("data-icon-closed")||"▾";i.textContent=t,i.style.transform="rotate(0deg)"}}catch(t){}},600)}catch(t){}})})}(t,e)}catch(t){}if(e.autoHighlight)try{!function(t,e){if(!t||!e||0===e.length)return;const n=t.querySelectorAll(".toc-link");if(!n||0===n.length)return;const i=e.map(t=>t.element).filter(t=>t);if(0===i.length)return;const l=()=>{n.forEach(t=>{t&&t.classList.remove("active")})};let r=!1;const a=()=>{r||(window.requestAnimationFrame(()=>{try{const e=window.pageYOffset+100;let n=null;for(let t=i.length-1;t>=0;t--){const l=i[t];if(l&&void 0!==l.offsetTop&&e>=l.offsetTop){n=l;break}}n&&n.id?(e=>{if(!e)return;l();const n=t.querySelector(`.toc-link[data-heading-id="${e}"]`);n&&n.classList.add("active")})(n.id):l()}catch(t){}r=!1}),r=!0)};try{a()}catch(t){}window.addEventListener("scroll",a,{passive:!0})}(t,l)}catch(t){}if(e.isCollapsible)try{!function(t,e){if(!t||!e)return;const n=t.querySelector(".toc-toggle-button"),i=t.querySelector(".toc-content"),l=t.querySelector(".toc-icon");if(!n||!i)return;const r=!1!==e.showIcon,a=n.getAttribute("data-icon-closed")||"▾",c=n.getAttribute("data-icon-open")||"none",o=parseInt(n.getAttribute("data-icon-rotation")||"180",10);if(!r)return;const s=e.initiallyCollapsed;s?i.setAttribute("hidden","true"):(i.removeAttribute("hidden"),t.classList.add("is-open")),n.setAttribute("aria-expanded",!s),l&&!s&&(c&&"none"!==c?l.textContent=c:l.style.transform=`rotate(${o}deg)`);const u=()=>{try{i.hasAttribute("hidden")?(i.removeAttribute("hidden"),n.setAttribute("aria-expanded","true"),t.classList.add("is-open"),l&&(c&&"none"!==c?l.textContent=c:l.style.transform=`rotate(${o}deg)`)):(i.setAttribute("hidden","true"),n.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),l&&(l.textContent=a,l.style.transform="rotate(0deg)"))}catch(t){}};n.addEventListener("click",u),n.addEventListener("keydown",t=>{t&&("Enter"!==t.key&&" "!==t.key||(t.preventDefault(),u()))})}(t,e)}catch(t){}}catch(t){}}(t,n)}catch(t){}})}function r(t=""){return t.toString().trim().toLowerCase()}if(window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(i,100)}),"loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{try{i(),l()}catch(t){}});else try{l()}catch(t){}})();