{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "blockType": "toc",
  "version": "1.0.0",
  "description": "HTML structure definition for Table of Contents block - defines element hierarchy, class names, and ARIA attributes",
  "root": "wrapper",

  "elements": {
    "wrapper": {
      "id": "wrapper",
      "tag": "div",
      "className": "gutplus-toc",
      "description": "Outermost container for the TOC block with theme class and position type",
      "children": ["headerWrapper", "content"],
      "attributes": {
        "data-toc-id": "{tocId}",
        "data-filter-mode": "{filterMode}",
        "data-include-levels": "{includeLevels.join(',')}",
        "data-include-classes": "{includeClasses}",
        "data-exclude-levels": "{excludeLevels.join(',')}",
        "data-exclude-classes": "{excludeClasses}",
        "data-depth-limit": "{depthLimit || 0}",
        "data-include-accordions": "{includeAccordions !== false}",
        "data-include-tabs": "{includeTabs !== false}",
        "data-h1-numbering": "{h1NumberingStyle || 'decimal'}",
        "data-h2-numbering": "{h2NumberingStyle || 'decimal'}",
        "data-h3-numbering": "{h3NumberingStyle || 'decimal'}",
        "data-h4-numbering": "{h4NumberingStyle || 'decimal'}",
        "data-h5-numbering": "{h5NumberingStyle || 'decimal'}",
        "data-h6-numbering": "{h6NumberingStyle || 'decimal'}",
        "data-smooth-scroll": "{smoothScroll}",
        "data-scroll-offset": "{scrollOffset}",
        "data-auto-highlight": "{autoHighlight}",
        "data-collapsible": "{isCollapsible}",
        "data-initially-collapsed": "{initiallyCollapsed}",
        "data-position-type": "{positionType}",
        "data-position-horizontal-side": "{positionHorizontalSide}",
        "data-click-behavior": "{clickBehavior || 'navigate'}",
        "data-enable-hierarchical-indent": "{enableHierarchicalIndent || false}",
        "data-level-indent": "{levelIndent || '1.25rem'}",
        "data-toc-items": "{encodeURIComponent(JSON.stringify(tocItems || []))}",
        "data-deleted-heading-ids": "{(deletedHeadingIds || []).join(',')}"
      },
      "conditionalClass": {
        "is-open": "{!initiallyCollapsed}",
        "gutplus-toc-theme-{currentTheme}": "{currentTheme}",
        "toc-position-{positionType}": "{positionType}",
        "icon-{iconPosition}": "{iconPosition}"
      },
      "appliesStyles": [
        "tocWidth",
        "wrapperBackgroundColor",
        "blockBorderColor",
        "blockBorderWidth",
        "blockBorderStyle",
        "blockBorderRadius",
        "blockShadow",
        "blockShadowHover",
        "positionTop",
        "zIndex"
      ]
    },

    "headerWrapper": {
      "id": "headerWrapper",
      "tag": "div",
      "className": "toc-header-wrapper",
      "description": "Container for header/title section (accordion-like)",
      "children": ["titleButton", "titleStatic"],
      "appliesStyles": []
    },

    "titleButton": {
      "id": "titleButton",
      "tag": "button",
      "className": "toc-title toc-toggle-button",
      "description": "Title button when collapsible (contains icon and text)",
      "children": ["iconSlotLeft", "titleTextWrapper", "iconSlotRight", "titleInline"],
      "conditionalRender": "{isCollapsible}",
      "attributes": {
        "id": "toc-toggle-{tocId}",
        "type": "button"
      },
      "aria": {
        "expanded": "{!initiallyCollapsed}",
        "controls": "toc-content-{tocId}"
      },
      "conditionalClass": {
        "icon-{iconPosition}": "{iconPosition}",
        "title-align-{titleAlignment}": "{titleAlignment}"
      },
      "appliesStyles": [
        "titleColor",
        "titleBackgroundColor",
        "hoverTitleColor",
        "hoverTitleBackgroundColor",
        "titleFontSize",
        "titleFontWeight",
        "titleFontStyle",
        "titleTextTransform",
        "titleTextDecoration",
        "titleAlignment"
      ]
    },

    "titleStatic": {
      "id": "titleStatic",
      "tag": "div",
      "className": "toc-title",
      "description": "Static title when not collapsible",
      "children": ["titleTextSpan"],
      "conditionalRender": "{showTitle && !isCollapsible}",
      "conditionalClass": {
        "title-align-{titleAlignment}": "{titleAlignment}"
      },
      "appliesStyles": [
        "titleColor",
        "titleBackgroundColor",
        "hoverTitleColor",
        "hoverTitleBackgroundColor",
        "titleFontSize",
        "titleFontWeight",
        "titleFontStyle",
        "titleTextTransform",
        "titleTextDecoration",
        "titleAlignment"
      ]
    },

    "iconSlotLeft": {
      "id": "iconSlotLeft",
      "tag": "span",
      "className": "toc-icon-slot",
      "description": "Icon slot for extreme-left position",
      "children": ["icon"],
      "conditionalRender": "{iconPosition === 'extreme-left' && showIcon}",
      "appliesStyles": []
    },

    "iconSlotRight": {
      "id": "iconSlotRight",
      "tag": "span",
      "className": "toc-icon-slot",
      "description": "Icon slot for extreme-right position",
      "children": ["icon"],
      "conditionalRender": "{iconPosition === 'extreme-right' && showIcon}",
      "appliesStyles": []
    },

    "titleTextWrapper": {
      "id": "titleTextWrapper",
      "tag": "div",
      "className": "toc-title-text-wrapper",
      "description": "Text wrapper for extreme icon positions",
      "children": ["titleTextSpan"],
      "conditionalRender": "{iconPosition === 'extreme-left' || iconPosition === 'extreme-right'}",
      "appliesStyles": []
    },

    "titleInline": {
      "id": "titleInline",
      "tag": "div",
      "className": "toc-title-inline",
      "description": "Inline wrapper for left/right icon positions",
      "children": ["icon", "titleTextSpan"],
      "conditionalRender": "{iconPosition === 'left' || iconPosition === 'right'}",
      "appliesStyles": []
    },

    "titleTextSpan": {
      "id": "titleTextSpan",
      "tag": "span",
      "className": "toc-title-text",
      "description": "Text content of title",
      "contentType": "static",
      "source": "{titleText}",
      "appliesStyles": []
    },

    "icon": {
      "id": "icon",
      "tag": "span",
      "className": "toc-icon",
      "description": "Collapse/expand icon (accordion-like)",
      "conditionalRender": "{showIcon}",
      "attributes": {
        "aria-hidden": "true",
        "data-icon-closed": "{iconTypeClosed}",
        "data-icon-open": "{iconTypeOpen}",
        "data-icon-rotation": "{iconRotation}"
      },
      "contentType": "static",
      "source": "{iconTypeClosed}",
      "appliesStyles": [
        "iconSize",
        "iconColor",
        "iconRotation"
      ]
    },

    "content": {
      "id": "content",
      "tag": "nav",
      "className": "toc-content",
      "description": "Main TOC navigation content area containing the list",
      "children": ["list"],
      "attributes": {
        "id": "toc-content-{tocId}"
      },
      "aria": {
        "label": "{titleText || 'Table of Contents'}"
      },
      "conditionalAttribute": {
        "hidden": "{isCollapsible && initiallyCollapsed}"
      },
      "appliesStyles": [
        "wrapperPadding"
      ]
    },

    "list": {
      "id": "list",
      "tag": "ul",
      "className": "toc-list toc-hierarchical-numbering",
      "description": "Main list element containing TOC entries",
      "children": ["listItem"],
      "attributes": {
        "data-h1-numbering": "{h1NumberingStyle || 'decimal'}",
        "data-h2-numbering": "{h2NumberingStyle || 'decimal'}",
        "data-h3-numbering": "{h3NumberingStyle || 'decimal'}",
        "data-h4-numbering": "{h4NumberingStyle || 'decimal'}",
        "data-h5-numbering": "{h5NumberingStyle || 'decimal'}",
        "data-h6-numbering": "{h6NumberingStyle || 'decimal'}"
      },
      "appliesStyles": [
        "itemSpacing",
        "levelIndent"
      ]
    },

    "listItem": {
      "id": "listItem",
      "tag": "li",
      "className": "toc-item",
      "description": "Individual TOC list item (generated dynamically by frontend JS)",
      "children": ["link", "nestedList"],
      "conditionalClass": {
        "toc-h{level}": "{level}",
        "active": "{isActive}"
      },
      "appliesStyles": []
    },

    "link": {
      "id": "link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to heading in the document",
      "attributes": {
        "href": "#{headingId}"
      },
      "contentType": "dynamic",
      "source": "{headingText}",
      "conditionalClass": {
        "active": "{isActive}"
      },
      "appliesStyles": [
        "linkColor",
        "linkHoverColor",
        "linkActiveColor",
        "linkVisitedColor"
      ]
    },

    "h1Link": {
      "id": "h1Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H1 heading - applies H1-specific styles",
      "parentContext": ".toc-h1",
      "cssSelector": ".toc-h1 .toc-link",
      "appliesStyles": [
        "h1Color",
        "h1HoverColor",
        "h1VisitedColor",
        "h1ActiveColor",
        "h1FontSize",
        "h1FontWeight",
        "h1FontStyle",
        "h1TextTransform",
        "h1TextDecoration"
      ]
    },

    "h2Link": {
      "id": "h2Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H2 heading - applies H2-specific styles",
      "parentContext": ".toc-h2",
      "cssSelector": ".toc-h2 .toc-link",
      "appliesStyles": [
        "h2Color",
        "h2HoverColor",
        "h2VisitedColor",
        "h2ActiveColor",
        "h2FontSize",
        "h2FontWeight",
        "h2FontStyle",
        "h2TextTransform",
        "h2TextDecoration"
      ]
    },

    "h3Link": {
      "id": "h3Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H3 heading - applies H3-specific styles",
      "parentContext": ".toc-h3",
      "cssSelector": ".toc-h3 .toc-link",
      "appliesStyles": [
        "h3Color",
        "h3HoverColor",
        "h3VisitedColor",
        "h3ActiveColor",
        "h3FontSize",
        "h3FontWeight",
        "h3FontStyle",
        "h3TextTransform",
        "h3TextDecoration"
      ]
    },

    "h4Link": {
      "id": "h4Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H4 heading - applies H4-specific styles",
      "parentContext": ".toc-h4",
      "cssSelector": ".toc-h4 .toc-link",
      "appliesStyles": [
        "h4Color",
        "h4HoverColor",
        "h4VisitedColor",
        "h4ActiveColor",
        "h4FontSize",
        "h4FontWeight",
        "h4FontStyle",
        "h4TextTransform",
        "h4TextDecoration"
      ]
    },

    "h5Link": {
      "id": "h5Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H5 heading - applies H5-specific styles",
      "parentContext": ".toc-h5",
      "cssSelector": ".toc-h5 .toc-link",
      "appliesStyles": [
        "h5Color",
        "h5HoverColor",
        "h5VisitedColor",
        "h5ActiveColor",
        "h5FontSize",
        "h5FontWeight",
        "h5FontStyle",
        "h5TextTransform",
        "h5TextDecoration"
      ]
    },

    "h6Link": {
      "id": "h6Link",
      "tag": "a",
      "className": "toc-link",
      "description": "Link to H6 heading - applies H6-specific styles",
      "parentContext": ".toc-h6",
      "cssSelector": ".toc-h6 .toc-link",
      "appliesStyles": [
        "h6Color",
        "h6HoverColor",
        "h6VisitedColor",
        "h6ActiveColor",
        "h6FontSize",
        "h6FontWeight",
        "h6FontStyle",
        "h6TextTransform",
        "h6TextDecoration"
      ]
    },

    "nestedList": {
      "id": "nestedList",
      "tag": "ul",
      "className": "toc-list toc-hierarchical-numbering",
      "description": "Nested list for sub-headings (recursive structure)",
      "children": [],
      "conditionalRender": "{hasChildren}",
      "attributes": {
        "data-h1-numbering": "{h1NumberingStyle || 'decimal'}",
        "data-h2-numbering": "{h2NumberingStyle || 'decimal'}",
        "data-h3-numbering": "{h3NumberingStyle || 'decimal'}",
        "data-h4-numbering": "{h4NumberingStyle || 'decimal'}",
        "data-h5-numbering": "{h5NumberingStyle || 'decimal'}",
        "data-h6-numbering": "{h6NumberingStyle || 'decimal'}"
      },
      "appliesStyles": [
        "itemSpacing",
        "levelIndent"
      ]
    },

    "placeholder": {
      "id": "placeholder",
      "tag": "li",
      "className": "toc-placeholder",
      "description": "Placeholder item shown while TOC is being generated",
      "contentType": "static",
      "source": "Loading table of contents...",
      "appliesStyles": []
    }
  },

  "hierarchy": {
    "root": "wrapper",
    "tree": {
      "wrapper": {
        "headerWrapper": {
          "titleButton": {
            "iconSlotLeft": ["icon"],
            "titleTextWrapper": ["titleTextSpan"],
            "iconSlotRight": ["icon"],
            "titleInline": ["icon", "titleTextSpan"]
          },
          "titleStatic": ["titleTextSpan"]
        },
        "content": {
          "list": {
            "listItem": ["link", "nestedList"],
            "placeholder": []
          }
        }
      }
    }
  }
}
