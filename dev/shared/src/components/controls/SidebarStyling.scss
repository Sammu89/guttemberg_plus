/**
 * Lego Controls - CSS Styles
 *
 * Styles for the modular Lego control system.
 *
 * @package guttemberg-plus
 */

/* ============================================
   ATOMS
   ============================================ */

/* NumberInput */
.gutplus-number-input {
	.components-input-control__container {
		width: 50px;
	}

	input {
		text-align: center;
		padding: 4px 8px;
	}
}

/* UnitDropdown */
.gutplus-unit-dropdown {
	.components-select-control__input {
		min-width: 55px;
		padding-right: 20px;
	}
}

/* MiniSlider */
.gutplus-mini-slider {
	flex: 1;
	margin: 0 !important;

	.components-range-control__wrapper {
		margin: 0;
	}

	.components-base-control__field {
		margin-bottom: 0;
	}
}

/* LinkToggle */
.gutplus-link-toggle {
	&.is-linked {
		color: var(--wp-admin-theme-color, #007cba);
	}

	&.is-unlinked {
		opacity: 0.6;
	}
}

/* DeviceSwitcher */
.gutplus-device-switcher {
	display: flex;
	gap: 2px;

	.gutplus-device-switcher__button {
		padding: 4px 6px;

		&.is-active {
			background: var(--wp-admin-theme-color, #007cba);
			color: #fff;
		}
	}
}

/* StyleIconButton */
.gutplus-style-icon-button {
	position: relative;

	.gutplus-style-icon-button__trigger {
		padding: 4px;
		min-width: 32px;
		height: 32px;
		border: 1px solid #ddd;
		border-radius: 4px;
		background: #fff;

		&:hover {
			border-color: #007cba;
		}

		svg {
			width: 20px;
			height: 20px;
		}
	}
}

.gutplus-style-icon-button__popover {
	.gutplus-style-options {
		display: flex;
		gap: 4px;
		padding: 8px;
	}

	.gutplus-style-option {
		padding: 6px;
		border: 1px solid #ddd;
		border-radius: 4px;
		background: #fff;

		&:hover {
			border-color: #007cba;
		}

		&.is-selected {
			border-color: var(--wp-admin-theme-color, #007cba);
			background: rgba(0, 124, 186, 0.1);
		}

		svg {
			width: 20px;
			height: 20px;
		}
	}
}

/* ColorSwatch */
.gutplus-color-swatch {
	position: relative;

	.gutplus-color-swatch__button {
		display: block;
		width: 28px;
		height: 28px;
	}
}

.gutplus-color-swatch__popover {
	.components-popover__content {
		padding: 0;
	}
}

/* SideIcon */
.gutplus-side-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;

	svg {
		width: 18px;
		height: 18px;
	}
}

/* ============================================
   MOLECULES
   ============================================ */

/* ValueWithUnit - Now uses native UnitControl */
.gutplus-value-with-unit {
	.components-unit-control-wrapper {
		max-width: 70px;
	}
}

/* SliderWithValue - Now uses native UnitControl */
.gutplus-slider-with-value {
	display: flex;
	align-items: center;
	gap: 8px;
	max-width: 100%;

	.gutplus-slider-with-value__unit-control {
		flex-shrink: 0;

		.components-unit-control-wrapper {
			max-width: 70px;
		}
	}
}

/* ============================================
   ORGANISMS
   ============================================ */

/* CompactBoxRow */
.gutplus-compact-box-row {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 4px 0;

	.gutplus-compact-box-row__icon {
		flex-shrink: 0;
	}

	/* Native Gutenberg UnitControl - combined value + unit */
	.gutplus-compact-box-row__value-unit {
		flex-shrink: 0;

		.components-unit-control-wrapper {
			width: 100px;
			min-width: 100px;
		}

		/* Ensure input has enough space for double digits */
		.components-input-control__input {
			min-width: 40px;
			padding-right: 4px;
		}

		/* Make unit text more readable */
		.components-unit-control__select {
			font-size: 12px;
			font-weight: 500;
			min-width: 32px;
			padding: 0 4px;
		}
	}

	.gutplus-compact-box-row__slider {
		flex: 1;
		min-width: 60px;
	}

	.gutplus-compact-box-row__link {
		flex-shrink: 0;
	}
}

/* ============================================
   FULL CONTROLS
   ============================================ */

/* BorderWidthControl */
.gutplus-border-width-control {
	.gutplus-border-width-control__sides {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}
}

/* BorderRadiusControl */
.gutplus-border-radius-control {
	.gutplus-border-radius-control__corners {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}
}

/* SpacingControl */
.gutplus-spacing-control {
	.gutplus-spacing-control__sides {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}
}

/* HeadingLevelControl */
.gutplus-heading-level-control {
	.gutplus-heading-level-control__buttons {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 4px;
		max-width: 180px;
	}

	.gutplus-heading-level-control__button {
		min-width: 36px;
		height: 32px;
		border: 1px solid #ddd;
		border-radius: 4px;
		background: #fff;

		&:hover {
			border-color: #007cba;
		}

		&.is-selected,
		&.is-pressed {
			border-color: var(--wp-admin-theme-color, #007cba);
			background: var(--wp-admin-theme-color, #007cba);
			color: #fff;
		}

		svg {
			width: auto;
			height: 16px;
		}
	}
}

/* BorderPanel */
.gutplus-border-panel {
	/* Row layout */
	.gutplus-border-panel__linked-row,
	.gutplus-border-panel__row {
		display: flex;
		align-items: center;
		gap: 8px;
	}

	/* Color swatch - slightly larger */
	.gutplus-border-panel__color-swatch {
		.gutplus-color-swatch__button {
			width: 32px !important;
			height: 32px !important;
		}
	}

	/* Style icon - match color swatch */
	.gutplus-border-panel__style-icon {
		.gutplus-style-icon-button__trigger {
			width: 32px;
			height: 32px;
			min-width: 32px;
		}
	}

	/* UnitControl - proper sizing for value + unit */
	.gutplus-border-panel__value-unit {
		flex-shrink: 0;

		.components-unit-control-wrapper {
			width: 100px;
			min-width: 100px;
		}

		/* Ensure input has enough space for double digits */
		.components-input-control__input {
			min-width: 40px;
			padding-right: 4px;
		}

		/* Make unit text more readable */
		.components-unit-control__select {
			font-size: 12px;
			font-weight: 500;
			min-width: 32px;
			padding: 0 4px;
		}
	}

	/* Side icon in unlinked mode */
	.gutplus-border-panel__side-icon {
		width: 20px;
		display: flex;
		align-items: center;
		justify-content: center;

		svg {
			width: 16px;
			height: 16px;
			opacity: 0.5;
		}
	}

	/* Slider */
	.gutplus-border-panel__slider {
		flex: 1;
		min-width: 50px;

		.components-base-control__field {
			margin-bottom: 0;
		}
	}

	/* Unlinked rows */
	.gutplus-border-panel__unlinked-rows {
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	/* Link toggle */
	.gutplus-border-panel__link-toggle {
		flex-shrink: 0;
	}
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Control header with label and device switcher */
.gutplus-control-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 8px;
}


/* SliderWithInput - Typography controls (Font Size, Letter Spacing, etc.) */
.gutplus-slider-with-input {
	.gutplus-slider-with-input__unit-control {
		flex-shrink: 0;

		.components-unit-control-wrapper {
			width: 100px;
			min-width: 100px;
		}

		/* Ensure input has enough space */
		.components-input-control__input {
			min-width: 40px;
			padding-right: 4px;
		}

		/* Make unit text more readable */
		.components-unit-control__select {
			font-size: 12px;
			font-weight: 500;
			min-width: 32px;
			padding: 0 4px;
		}
	}
}

/* ============================================
   GLOBAL OVERRIDES (for popovers/portals)
   ============================================ */

/* ToolsPanel padding reset */
.components-tools-panel {
	padding: 0;
}

/* WordPress UnitControl dropdown (renders in portal) */
.components-unit-control__select {
	font-size: 13px !important;
	min-width: 60px;

	option {
		font-size: 13px;
		padding: 6px 10px;
	}
}

/* Unit control select items in popover */
.components-custom-select-control__menu {
	.components-custom-select-control__item {
		font-size: 13px;
		padding: 8px 12px;
	}
}

/* ============================================
   TABBED INSPECTOR
   ============================================ */

.gutplus-tabbed-inspector {
	.components-tab-panel__tabs {
		display: flex;
		width: 100%;
	}

	.components-tab-panel__tabs-item {
		flex: 1 1 0;
		min-width: 0;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 6px;
	}

	.gutplus-tabbed-inspector__tab-label {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		font-size: 12px;
		font-weight: 600;
		line-height: 1;
	}
}

/* ============================================
   TYPOGRAPHY PANEL STYLES
   ============================================ */

// Typography Panel Styles - ToggleChip
.gutplus-toggle-chip {
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #ccc;
    background: transparent;

    &.is-active {
        background: var(--wp-admin-theme-color);
        color: white;
        border-color: var(--wp-admin-theme-color);
    }
}

// FormattingToggleGroup
.gutplus-formatting-toggle-group {
    margin-bottom: 12px;
}

// FontWeightSlider
.gutplus-font-weight-slider {
    margin-top: 12px;
    margin-bottom: 12px;
}

// DecorationWidthControl
.gutplus-decoration-width-control {
    &__presets {
        margin-bottom: 8px;
    }
}

// TextDecorationPanel
.gutplus-text-decoration-panel {
    margin-top: 12px;
    padding: 12px;
    background: #f0f0f0;
    border-radius: 4px;

    &__controls {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
}

// FormattingControl
.gutplus-formatting-control {
    .components-base-control__label {
        margin-bottom: 8px;
    }
}

// ShadowLayer
.gutplus-shadow-layer, .gutplus-text-decoration-panel {
    border: 1px solid #b3b3b3;
    border-radius: 4px;
	margin-bottom: 10px;
}


// Theme Selector
.theme-selector {
  padding: 15px;

  .components-button {
    padding: 10px;
    text-transform: uppercase;
    border-radius: 2px !important;
    text-align: center;
    justify-content: center;
  }
}

// Buttons of Sidebar
h2.components-panel__body-title {
  margin-bottom: 10px;
  background: linear-gradient(
    135deg, rgba(120, 90, 200, 0.08), rgba(90, 110, 220, 0.04)
  );
  text-transform: uppercase;
  border-radius: 4px;

}


//Utility Bar

/* =========================================
   GutPlus – Utility Bar 
   ========================================= */

.gutplus-utility-bar {
  // Make sure everything stays on one line
  display: flex;
  align-items: center;
  max-width: 150px;


  // Right-aligned as discussed earlier
  justify-content: flex-end;

  // Prevent internal squeeze issues
  > * {
    min-width: 0;
  }

  // Never let the last icon button collapse or overlap
  > :last-child {
    flex-shrink: 0;
    margin-left: 6px;
  }

  // Icon-only buttons must not shrink
  .components-button.has-icon {
    flex: 0 0 auto;
  }
}

// =========================================
// SidebarGlobal – Button state override
// =========================================

.gutplus-utility-bar {
  justify-content: flex-end;

  /* ---------- Variables ---------- */

  --gutplus-inactive-color: #007cba;
  --gutplus-active-bg: #007cba;
  --gutplus-active-color: #ffffff;

  /* ---------- Base button (inactive) ---------- */
  .components-button {
    /* Kill Gutenberg fake border */
    box-shadow: none !important;

    transition:
      background 0.15s ease,
      color 0.15s ease;
  }

  /* ---------- Icon inherits color ---------- */
  .components-button svg {
    fill: currentColor;
  }

  /* ---------- Active / pressed ---------- */
  .components-button.is-pressed:not(:disabled,[aria-disabled="true"]),
  .components-button[aria-pressed="true"]:not(:disabled,[aria-disabled="true"]) {
    background: var(--gutplus-active-bg) !important;
    color: var(--gutplus-active-color);
    box-shadow: none !important;
  }

  /* ---------- Active hover (block WP override) ---------- */
  .components-button.is-pressed:hover:not(:disabled,[aria-disabled="true"]),
  .components-button[aria-pressed="true"]:hover:not(:disabled,[aria-disabled="true"]) {
    background: var(--gutplus-active-bg) !important;
    color: var(--gutplus-active-color);
  }

  /* ---------- Inactive hover (optional) ---------- */
  .components-button:hover:not([aria-pressed="true"]) {
    background: rgba(0, 124, 186, 0.08);
  }

  /* ---------- Keyboard focus ---------- */
  .components-button:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 124, 186, 0.4);
  }
}


//Color Components without margins

div.gutplus-subgroup-controls {
  .components-tools-panel {
    padding: 0 !important;
	border: none;

    > * {
      margin: 0 !important;
    }
  }
}


//Subgroups

.components-flex-item {

border-bottom: 1px solid #ededed;

}

/* ============================================
   ICON PANEL TABS
   ============================================ */

.icon-state-tabs {
	.components-tab-panel__tabs {
		display: flex;
		width: 100%;
		margin-bottom: 12px;
		border-bottom: 1px solid #ddd;
	}

	.components-tab-panel__tabs-item {
		flex: 1 1 0;
		min-width: 0;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 8px 12px;
		font-size: 13px;
		font-weight: 500;
		border: none;
		border-bottom: 2px solid transparent;
		background: transparent;
		cursor: pointer;
		transition: all 0.2s ease;

		&:hover {
			background: #f0f0f1;
		}

		&[aria-selected="true"] {
			border-bottom-color: var(--wp-admin-theme-color, #007cba);
			color: var(--wp-admin-theme-color, #007cba);
			font-weight: 600;
		}
	}
}