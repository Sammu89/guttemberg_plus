/**
 * Tabs Block - Frontend Styles
 *
 * Provides core styling for tabs functionality on the frontend.
 * Supports both horizontal and vertical orientations.
 * Uses CSS custom properties from schema (single source of truth).
 *
 * @package
 * @since 1.0.0
 */

/* Block wrapper */
.wp-block-custom-tabs {
	overflow: clip;
	border: var(--tabs-border-width, 0) var(--tabs-border-style, none) var(--tabs-border-color, transparent);
	border-radius: var(--tabs-border-radius, 0);
	box-shadow: var(--tabs-border-shadow, none);
	transition: box-shadow 0.2s ease;

	&:hover {
		box-shadow: var(--tabs-border-shadow-hover, var(--tabs-border-shadow, none));
	}
}

/* Tab list (navigation) */
.tabs-list {
	display: flex;
	gap: 0.5rem;
	background-color: var(--tab-list-bg, #f5f5f5);
	justify-content: var(--tab-list-align, flex-start);
	overflow-x: auto;
	padding: 0.5rem;
	padding-bottom: 0;
	outline: none !important;
	/* Divider border - bottom edge on horizontal (controlled by enableDividerBorder toggle) */
	border-bottom: var(--tabs-divider-border-width, 1px) var(--tabs-divider-border-style, solid) var(--tabs-divider-border-color, transparent);

	&[role="tablist"][aria-orientation="vertical"] {
		flex-direction: column;
		padding-right: 0;
		/* Vertical orientation - divider border moves to right edge */
		border-bottom: none;
		border-right: var(--tabs-divider-border-width, 1px) var(--tabs-divider-border-style, solid) var(--tabs-divider-border-color, transparent);
	}
}

/* Tab button */
.tab-button {
	padding: 0.75rem 1.5rem;
	background-color: var(--tab-button-bg, transparent);
	color: var(--tab-button-color, #666);
	font-size: var(--tab-button-font-size, 1rem);
	font-weight: var(--tab-button-font-weight, 500);
	font-style: var(--tab-button-font-style, normal);
	text-transform: var(--tab-button-text-transform, none);
	text-decoration: var(--tab-button-text-decoration, none);
	text-align: var(--tab-button-text-align, center);
	border: var(--tabs-button-border-width, 1px) var(--tabs-button-border-style, solid) var(--tabs-button-border-color, transparent);
	border-radius: var(--tabs-button-border-radius, 0);
	box-shadow: var(--tabs-button-border-shadow, none);
	cursor: pointer;
	white-space: nowrap;
	transition: color 0.2s ease, border-color 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
	outline: none !important;

	/* Focus border - bottom edge on horizontal */
	border-bottom: var(--tabs-focus-border-width, 2px) var(--tabs-focus-border-style, solid) var(--tabs-focus-border-color, transparent);

	&:hover:not(:disabled) {
		color: var(--tab-button-hover-color, #333);
		background-color: var(--tab-button-hover-bg, rgba(0, 0, 0, 0.05));
		box-shadow: var(--tabs-button-border-shadow-hover, none);
	}

	&:focus {
		// Use same colors as normal state to prevent theme CSS override
		background-color: var(--tab-button-bg, transparent);
		color: var(--tab-button-color, #666);
		// Inset box-shadow with blur for darker gradient entering from edges
		box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
		// Override WordPress global focus outline style
		outline: none;
	}

	&.active,
	&[aria-selected="true"] {
		color: var(--tab-button-active-color, #007cba);
		background-color: var(--tab-button-active-bg, transparent);
		border-color: var(--tab-button-active-border-color, #007cba);
		border-bottom-color: var(--tab-button-active-border-bottom-color, var(--tab-button-active-border-color, #007cba));
		/* Focus border active color for horizontal */
		border-bottom-color: var(--tabs-focus-border-color-active, var(--tabs-focus-border-color, transparent));
	}

	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}

	/* Vertical orientation - focus border moves to right edge */
	.tabs-list[aria-orientation="vertical"] & {
		border-right-color: var(--tab-button-active-border-color, currentColor);
		/* Override bottom border with right border for vertical */
		border-bottom-color: transparent;
		border-right: var(--tabs-focus-border-width, 2px) var(--tabs-focus-border-style, solid) var(--tabs-focus-border-color, transparent);

		&.active,
		&[aria-selected="true"] {
			border-right-color: var(--tabs-focus-border-color-active, var(--tabs-focus-border-color, transparent));
		}
	}
}

/* Tab icon (rendered when showIcon is true in JS) */
.tab-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	color: var(--tab-icon-color, currentColor);
	font-size: var(--tab-icon-size, 1em);
	margin-right: 0.5rem;
	transition: transform var(--tab-icon-animation-duration, 300ms) ease;

	/* Icon rotation (for open/close states, controlled via JS) */
	&.is-rotated {
		transform: rotate(var(--tab-icon-rotation, 180deg));
	}

	/* Image icon */
	&.tab-icon-image {
		width: var(--tab-icon-size, 1em);
		height: var(--tab-icon-size, 1em);
		object-fit: contain;
	}
}

/* Tabs panels container */
.tabs-panels {
	position: relative;
	outline: none !important;
}

/* Tab panel */
.tab-panel {
	background-color: var(--tab-panel-bg, #fff);
	color: var(--tab-panel-color, #333);
	border: var(--tabs-panel-border-width, 0) var(--tabs-panel-border-style, none) var(--tabs-panel-border-color, transparent);
	border-radius: var(--tabs-panel-border-radius, 0);
	overflow: hidden;
	outline: none !important;

	&[hidden] {
		display: none;
	}

	&.active {
		animation: fadeIn 200ms ease-in-out;
	}
}

/* Tab panel inner wrapper */
.tab-panel-inner {
	padding: 1.5rem;
}

/* Fade-in animation */
@keyframes fadeIn {

	from {
		opacity: 0;
		transform: translateY(10px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Responsive accordion fallback */
.accordion-fallback {
	display: none;

	.responsive-accordion & {

		@media (max-width: 768px) {
			display: block;
		}
	}
}

/* Layout variations */
.wp-block-custom-tabs.is-vertical,
.wp-block-custom-tabs[data-orientation="vertical"] {
	display: flex;
	gap: 1.5rem;

	.tabs-list {
		flex-shrink: 0;
		min-width: 200px;
	}

	.tabs-panels {
		flex: 1;
	}
}

/* Responsive adjustments */
@media (max-width: 768px) {

	.tab-button {
		padding: 0.625rem 1rem;
		font-size: 0.95rem;
	}

	.tab-panel-inner {
		padding: 1rem;
	}

	.tabs-list {
		gap: 0.25rem;
		margin-bottom: 0.75rem;
	}

	/* Hide tab navigation and show accordion on mobile if responsive fallback enabled */
	.wp-block-custom-tabs.responsive-accordion {

		.tabs-list,
		.tabs-panels {
			display: none;
		}

		.accordion-fallback {
			display: block;
		}
	}
}

/* Accessibility - Reduced motion */
@media (prefers-reduced-motion: reduce) {

	.tab-button,
	.tab-panel,
	.tab-icon,
	.accordion-button,
	.accordion-panel {
		transition: none !important;
		animation: none !important;
	}
}
