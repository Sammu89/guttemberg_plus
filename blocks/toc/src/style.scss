/**
 * TOC Block - Frontend Styles
 *
 * Provides core styling for table of contents functionality.
 * Uses CSS custom properties for theming support (3-tier cascade).
 *
 * @package
 * @since 1.0.0
 */

@use 'theme-generated';

/* Block wrapper */
.wp-block-custom-toc {
	background-color: var(--toc-wrapper-background-color, #ffffff);
	border: var(--toc-border-width, 1px) var(--toc-border-style, solid) var(--toc-border-color, #dddddd);
	border-radius: var(--toc-border-radius, 4px 4px 4px 4px);
	padding: var(--toc-wrapper-padding, 20px);
	box-shadow: var(--toc-border-shadow, none);
	overflow: hidden;
	transition: box-shadow 0.2s ease;

	&:hover {
		box-shadow: var(--toc-border-shadow-hover, none);
	}

	// Alignment classes (sammu-blocks)
	&.sammu-blocks-align-left {
		margin-left: 0 !important;
		margin-right: auto !important;
	}

	&.sammu-blocks-align-center {
		margin-left: auto !important;
		margin-right: auto !important;
	}

	&.sammu-blocks-align-right {
		margin-left: auto !important;
		margin-right: 0 !important;
	}
}

/* Title */
.toc-title {
	color: var(--toc-title-color, #333333);
	background-color: var(--toc-title-background-color, transparent);
	font-size: var(--toc-title-font-size, 20px);
	font-weight: var(--toc-title-font-weight, 700);
	text-align: var(--toc-title-alignment, left);
	padding: 12px;
	margin: 0 0 1rem 0;
}

/* Toggle button (collapsible) */
.toc-toggle-button {
	width: 100%;
	background: none;
	border: none;
	cursor: pointer;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: background-color 0.2s ease;

	&:hover {
		background-color: rgba(0, 0, 0, 0.05);
	}

	&:focus {
		outline: 2px solid #007cba;
		outline-offset: -2px;
	}
}

/* Collapse icon */
.toc-collapse-icon {
	font-size: var(--toc-collapse-icon-size, 20px);
	color: var(--toc-collapse-icon-color, #666666);
	transition: transform 0.3s ease;
}

.toc-toggle-button[aria-expanded="false"] .toc-collapse-icon {
	transform: rotate(-90deg);
}

/* TOC content container */
.toc-content {
	padding: 0;
}

/* TOC list */
.toc-list {
	list-style-type: disc;
	margin: 0;
	padding: 0 0 0 1.5rem;

	li {
		margin-bottom: var(--toc-item-spacing, 8px);
		line-height: 1.6;
	}

	/* Nested levels */
	ul {
		padding-left: var(--toc-level-indent, 20px);
		margin-top: 0.5rem;
	}
}

/* Numbering styles */
.toc-list.numbering-decimal {
	list-style-type: decimal;

	ul {
		list-style-type: decimal;
	}
}

.toc-list.numbering-roman {
	list-style-type: upper-roman;

	ul {
		list-style-type: lower-roman;
	}
}

.toc-list.numbering-alpha {
	list-style-type: upper-alpha;

	ul {
		list-style-type: lower-alpha;
	}
}

.toc-list.numbering-none {
	list-style-type: none;
	padding-left: 0;

	ul {
		list-style-type: none;
		padding-left: var(--toc-level-indent, 20px);
	}
}

/* TOC links */
.toc-link {
	color: var(--toc-link-color, #0073aa);
	text-decoration: none;
	transition: color 0.2s ease;

	&:hover {
		color: var(--toc-link-hover-color, #005177);
		text-decoration: underline;
	}

	&:visited {
		color: var(--toc-link-visited-color, #0073aa);
	}

	&:active {
		color: var(--toc-link-active-color, #005177);
	}

	&.is-active {
		font-weight: bold;
		color: var(--toc-link-active-color, #005177);
	}
}

/* Level-specific styling */
.toc-level-1 {
	font-size: var(--toc-level1-font-size, 18px);
	font-weight: var(--toc-level1-font-weight, 600);
	font-style: var(--toc-level1-font-style, normal);
	text-transform: var(--toc-level1-text-transform, none);
	text-decoration: var(--toc-level1-text-decoration, none);

	.toc-link {
		color: var(--toc-level1-color, #0073aa);
	}
}

.toc-level-2 {
	font-size: var(--toc-level2-font-size, 16px);
	font-weight: var(--toc-level2-font-weight, normal);
	font-style: var(--toc-level2-font-style, normal);
	text-transform: var(--toc-level2-text-transform, none);
	text-decoration: var(--toc-level2-text-decoration, none);

	.toc-link {
		color: var(--toc-level2-color, #0073aa);
	}
}

.toc-level-3,
.toc-level-4,
.toc-level-5,
.toc-level-6 {
	font-size: var(--toc-level3-plus-font-size, 14px);
	font-weight: var(--toc-level3-plus-font-weight, normal);
	font-style: var(--toc-level3-plus-font-style, normal);
	text-transform: var(--toc-level3-plus-text-transform, none);
	text-decoration: var(--toc-level3-plus-text-decoration, none);

	.toc-link {
		color: var(--toc-level3-plus-color, #0073aa);
	}
}

/* Numbering prefix color */
.toc-list.numbering-decimal li::marker,
.toc-list.numbering-roman li::marker,
.toc-list.numbering-alpha li::marker {
	color: var(--toc-numbering-color, #0073aa);
}

/* Position types */
.toc-position-default {
	position: static;
}

.toc-position-sticky {
	position: sticky;
	top: var(--toc-position-top, 100px);
	z-index: var(--toc-z-index, 100);
}

.toc-position-fixed {
	position: fixed;
	top: var(--toc-position-top, 100px);
	right: 20px;
	max-width: 300px;
	z-index: var(--toc-z-index, 100);
}

/* Placeholder (before JS loads) */
.toc-placeholder {
	color: #999;
	font-style: italic;
}

/* Accessibility - Reduced motion */
@media (prefers-reduced-motion: reduce) {

	.toc-toggle-button,
	.toc-collapse-icon,
	.toc-link {
		transition: none !important;
	}
}
