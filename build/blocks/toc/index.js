(()=>{"use strict";var e={87:e=>{e.exports=window.wp.element},143:e=>{e.exports=window.wp.data},393:(e,t,l)=>{l.d(t,{iz:()=>$,hK:()=>F,jQ:()=>I,Yz:()=>L.Yz,Ij:()=>O,sP:()=>B.s,O_:()=>k.O,lS:()=>o.lS,Gd:()=>W,W4:()=>j});var o=l(767);const n={top:16,right:16,bottom:16,left:16},r={topLeft:4,topRight:4,bottomLeft:4,bottomRight:4};var s=l(143);const a=window.wp.apiFetch;var i=l.n(a);const c="gutenberg-blocks/themes",u={accordionThemes:{},tabsThemes:{},tocThemes:{},themesLoaded:{accordion:!1,tabs:!1,toc:!1},isLoading:!1,error:null},d="SET_THEMES",p="SET_LOADING",g="SET_ERROR",m="THEME_CREATED",b="THEME_UPDATED",h="THEME_DELETED",y="THEME_RENAMED";function f(e){return`${e}Themes`}const v={*loadThemes(e){yield v.setLoading(!0),yield v.setError(null);try{const t=yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}`,method:"GET"}};return{type:d,blockType:e,themes:t}}catch(e){return yield v.setError(e.message),{type:"LOAD_THEMES_ERROR"}}finally{yield v.setLoading(!1)}},*createTheme(e,t,l){console.log("[REDUX ACTION] ========== CREATE THEME STARTED =========="),console.log("[REDUX ACTION] Timestamp:",(new Date).toISOString()),console.log("[REDUX ACTION] Block type:",e),console.log("[REDUX ACTION] Theme name:",t),console.log("[REDUX ACTION] Values count:",Object.keys(l).length),yield v.setLoading(!0),yield v.setError(null);try{console.log("[REDUX ACTION] Sending POST request to API...");const o=yield{type:"API_FETCH",request:{path:"/gutenberg-blocks/v1/themes",method:"POST",data:{blockType:e,name:t,values:l}}};console.log("[REDUX ACTION] API response received!"),console.log("[REDUX ACTION] Theme returned:",o);const n={type:m,blockType:e,theme:o};return console.log("[REDUX ACTION] Dispatching THEME_CREATED to reducer..."),console.log("[REDUX ACTION] ============================================"),n}catch(e){throw console.error("[REDUX ACTION] ERROR creating theme:",e),yield v.setError(e.message),e}finally{yield v.setLoading(!1)}},*updateTheme(e,t,l){yield v.setLoading(!0),yield v.setError(null);try{const o=yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}`,method:"PUT",data:{values:l}}};return{type:b,blockType:e,theme:o}}catch(e){throw yield v.setError(e.message),e}finally{yield v.setLoading(!1)}},*deleteTheme(e,t){yield v.setLoading(!0),yield v.setError(null);try{return yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}`,method:"DELETE"}},{type:h,blockType:e,themeName:t}}catch(e){throw yield v.setError(e.message),e}finally{yield v.setLoading(!1)}},*renameTheme(e,t,l){yield v.setLoading(!0),yield v.setError(null);try{return yield{type:"API_FETCH",request:{path:`/gutenberg-blocks/v1/themes/${e}/${encodeURIComponent(t)}/rename`,method:"POST",data:{newName:l}}},{type:y,blockType:e,oldName:t,newName:l}}catch(e){throw yield v.setError(e.message),e}finally{yield v.setLoading(!1)}},setLoading:e=>({type:p,isLoading:e}),setError:e=>({type:g,error:e})},T={getThemes:(e,t)=>e[f(t)]||{},getTheme:(e,t,l)=>T.getThemes(e,t)[l]||null,hasTheme:(e,t,l)=>null!==T.getTheme(e,t,l),isLoading:e=>e.isLoading,getError:e=>e.error,areThemesLoaded:(e,t)=>e.themesLoaded?.[t]||!1,getThemeNames(e,t){const l=T.getThemes(e,t);return Object.keys(l)}},C={API_FETCH:({request:e})=>i()(e)},E=(0,s.createReduxStore)(c,{reducer:(e=u,t)=>{switch(t.type){case d:{const l=f(t.blockType);return{...e,[l]:t.themes,themesLoaded:{...e.themesLoaded,[t.blockType]:!0}}}case p:return{...e,isLoading:t.isLoading};case g:return{...e,error:t.error};case m:{const l=f(t.blockType);if(console.log("[REDUX STORE] ========== THEME_CREATED REDUCER =========="),console.log("[REDUX STORE] Timestamp:",(new Date).toISOString()),console.log("[REDUX STORE] Block type:",t.blockType),console.log("[REDUX STORE] State key:",l),console.log("[REDUX STORE] Theme name:",t.theme?.name),console.log("[REDUX STORE] Previous themes:",Object.keys(e[l]||{})),!t.theme||!t.theme.name)return console.error("[REDUX STORE] ERROR: Invalid theme object",t),e;const o={...e,[l]:{...e[l],[t.theme.name]:t.theme}};return console.log("[REDUX STORE] New themes list:",Object.keys(o[l])),console.log("[REDUX STORE] Theme successfully added to store!"),console.log("[REDUX STORE] ================================================"),o}case b:{const l=f(t.blockType);return t.theme&&t.theme.name?{...e,[l]:{...e[l],[t.theme.name]:t.theme}}:(console.error("[Theme Store] THEME_UPDATED: Invalid theme object",t),e)}case h:{const l=f(t.blockType),o={...e[l]};return delete o[t.themeName],{...e,[l]:o}}case y:{const l=f(t.blockType),o={...e[l]},n=o[t.oldName];return delete o[t.oldName],o[t.newName]={...n,name:t.newName},{...e,[l]:o}}default:return e}},actions:v,selectors:T,controls:C});if(!wp.data.select(c))try{(0,s.register)(E)}catch(e){throw console.error("[Theme Store] Registration error:",e),e}var k=l(957);const x="0123456789abcdefghijklmnopqrstuvwxyz",S=new Set;function O(e="block"){if("string"!=typeof e||0===e.length)throw new Error("Prefix must be a non-empty string.");let t,l=0;do{let o="";for(let e=0;e<4;e++){const e=Math.floor(Math.random()*x.length);o+=x[e]}if(t=`${e}-${o}`,l++,l>=1e3)throw new Error("Failed to generate unique ID after 1000 attempts.")}while(S.has(t));return S.add(t),t}function P(e,t,l=[]){const o={};for(const[n,r]of Object.entries(e)){if(l.includes(n))continue;if(null==r)continue;const e=t[n];let s=!1;s="object"!=typeof r||null===r||Array.isArray(r)?r!==e:JSON.stringify(r)!==JSON.stringify(e),s&&(o[n]=r)}return o}function w(e,t){return{...e,...t}}function z(e,t=[]){const l={};for(const[o,n]of Object.entries(e))t.includes(o)||void 0===n||(l[o]=n);return l}var B=l(591),L=l(631),V=l(609),A=l(427),R=l(87);function I({blockType:e,currentTheme:t,setAttributes:l,isCustomized:o,themes:n={},themesLoaded:r=!1,attributes:s={},effectiveValues:a={},onChange:i,onSaveNew:c,onUpdate:u,onDelete:d,onRename:p,onReset:g,onThemeChange:m,sessionCache:b={}}){(0,L.Yz)("[DEBUG] ThemeSelector props received:"),(0,L.Yz)("  blockType:",e),(0,L.Yz)("  currentTheme:",t),(0,L.Yz)("  themes:",n),(0,L.Yz)("  onSaveNew type:",typeof c),(0,L.Yz)("  onUpdate type:",typeof u),(0,L.Yz)("  onDelete type:",typeof d),(0,L.Yz)("  onRename type:",typeof p),(0,L.Yz)("  onReset type:",typeof g);const[h,y]=(0,R.useState)(!1),[f,v]=(0,R.useState)(!1),[T,C]=(0,R.useState)("");(0,R.useEffect)(()=>{console.log("\n[ThemeSelector] PROPS CHANGED (useEffect):"),console.log("  - currentTheme changed to:",t||"(empty = Default)"),console.log("  - isCustomized:",o),console.log("  - themes count:",Object.keys(n||{}).length),console.log("  - Available themes:",Object.keys(n||{}))},[t,o,n]);const E=[];E.push({label:"Default",value:""}),b[""]&&E.push({label:"Default (customized)",value:"::customized"}),Object.keys(n||{}).forEach(e=>{E.push({label:e,value:e}),b[e]&&E.push({label:`${e} (customized)`,value:`${e}::customized`})});const k=o?""===t?"::customized":`${t}::customized`:t;return console.log("\n[ThemeSelector] RENDERING:"),console.log("  - currentTheme prop:",t||"(empty string = Default)"),console.log("  - isCustomized prop:",o),console.log("  - Calculated dropdownValue:",k||"(empty string = Default)"),console.log("  - Available theme options:",E.map(e=>e.value)),console.log("  - Dropdown will show:",E.find(e=>e.value===k)?.label||"NOT FOUND!"),(0,V.createElement)("div",{className:"theme-selector"},(0,V.createElement)(A.SelectControl,{label:"Theme",value:k,options:E,onChange:e=>{const t=e.endsWith("::customized"),o=t?e.replace("::customized",""):e;m?m(o,t):l?l({currentTheme:o}):i&&i(o)},__next40pxDefaultSize:!0}),(0,V.createElement)("div",{className:"theme-actions",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginTop:"12px"}},(0,V.createElement)(A.Button,{size:"small",variant:"secondary",onClick:()=>y(!0),disabled:!o},"Save as New Theme"),(0,V.createElement)(A.Button,{size:"small",variant:"secondary",onClick:u,disabled:!o||""===t},"Update Theme"),(0,V.createElement)(A.Button,{size:"small",variant:"secondary",onClick:()=>v(!0),disabled:""===t},"Rename"),(0,V.createElement)(A.Button,{size:"small",variant:"secondary",onClick:d,disabled:""===t,isDestructive:!0},"Delete"),(0,V.createElement)(A.Button,{size:"small",variant:"tertiary",onClick:g,disabled:!o,style:{gridColumn:"1 / -1"}},"Reset Modifications")),h&&(0,V.createElement)(A.Modal,{title:"Create New Theme",onRequestClose:()=>y(!1)},(0,V.createElement)(A.TextControl,{label:"Theme Name",value:T,onChange:C,placeholder:"Enter theme name",__nextHasNoMarginBottom:!0}),(0,V.createElement)(A.Button,{variant:"primary",onClick:()=>{c(T),y(!1),C("")}},"Create Theme")),f&&(0,V.createElement)(A.Modal,{title:"Rename Theme",onRequestClose:()=>v(!1)},(0,V.createElement)(A.TextControl,{label:"New Theme Name",value:T,onChange:C,placeholder:t,__nextHasNoMarginBottom:!0}),(0,V.createElement)(A.Button,{variant:"primary",onClick:()=>{p(t,T),v(!1),C("")}},"Rename")))}function N({label:e,value:t,onChange:l,disableAlpha:o=!1,help:n=""}){const[r,s]=(0,R.useState)(!1),[a,i]=(0,R.useState)(t),[c,u]=(0,R.useState)(t),d=(0,R.useRef)(null);(0,R.useEffect)(()=>{!r&&t&&(i(t),u(t))},[t,r]);const p=e=>{let l;l="string"==typeof e?e:e.hex?e.hex:"hex"===e.source?"#"+e.hex:t,i(l)},g=()=>{i(c),s(!1)},m=a;return(0,V.createElement)(A.BaseControl,{label:e,help:n,className:"compact-color-control"},(0,V.createElement)("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"}},(0,V.createElement)("div",{style:{width:"32px",height:"32px",backgroundColor:m,border:"1px solid #ddd",borderRadius:"4px",flexShrink:0}}),(0,V.createElement)("div",{style:{flex:1}},(0,V.createElement)(A.TextControl,{value:m||"",onChange:e=>{l(e),i(e)},placeholder:"Color value",style:{marginBottom:0},__nextHasNoMarginBottom:!0})),(0,V.createElement)(A.Button,{ref:d,variant:"secondary",onClick:()=>{u(t),i(t),s(!0)},"aria-expanded":r},"Choose color")),r&&(0,V.createElement)(A.Popover,{anchor:d.current,position:"bottom right",onClose:g,focusOnMount:!1,noArrow:!1},(0,V.createElement)("div",{style:{padding:"16px"}},(0,V.createElement)(A.ColorPicker,{color:a,onChange:p,onChangeComplete:p,disableAlpha:o,enableAlpha:!o}),(0,V.createElement)("div",{style:{marginTop:"16px",display:"flex",justifyContent:"space-between",gap:"8px",borderTop:"1px solid #ddd",paddingTop:"12px"}},(0,V.createElement)(A.Button,{variant:"tertiary",onClick:g},"Cancel"),(0,V.createElement)(A.Button,{variant:"primary",onClick:()=>{l(a),s(!1)}},"OK")))))}function D(e){if(null==e)return null;if("number"==typeof e)return e;if("string"==typeof e){const t=e.match(/^(-?\d+(?:\.\d+)?)/);return t?parseFloat(t[1]):null}return null}const H=function({schema:e={},schemaGroup:t="",attributes:l={},setAttributes:s,effectiveValues:a={},theme:i,cssDefaults:c={},initialOpen:u=!1,title:d}){if(!s)return console.warn("[GenericPanel] Missing required prop: setAttributes"),null;if(!e||!t)return null;const p=d||e.groups?.[t]?.title||t,g=Object.entries(e.attributes||{}).filter(([,e])=>e.group===t).map(([e,t])=>({name:e,...t})).sort((e,t)=>(void 0!==e.order?e.order:999)-(void 0!==t.order?t.order:999));if(0===g.length)return null;const m=(e,t)=>{s({[e]:t})},b=(e,t)=>(0,V.createElement)("span",{style:{display:"flex",alignItems:"center",gap:"6px"}},e,(e=>(0,o.MI)(e,l,i,c))(t)&&(0,V.createElement)("span",{className:"customization-indicator",title:"This property has been customized",style:{display:"inline-block",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#dc3232",flexShrink:0}})),h=(e,t)=>{const{control:o,label:s,description:i,options:c,min:u,max:d,step:p,default:g,disabledWhen:h,showWhen:y,units:f}=t,v=a[e],T=s||e,C=i||"";if(y){let e=!1;if(Object.entries(y).forEach(([t,o])=>{const n=l[t];Array.isArray(o)&&o.includes(n)&&(e=!0)}),!e)return null}let E=!1;if(h&&Object.entries(h).forEach(([e,t])=>{const o=l[e];Array.isArray(t)&&t.includes(o)&&(E=!0)}),!o)return null;switch(o){case"ColorPicker":{const t=function(e,t,l=null){return null!=e?e:function(e,t=null){const l=t||function(e){const t=e.toLowerCase();return t.includes("color")||t.includes("colour")?"color":t.includes("size")||t.includes("width")||t.includes("height")||t.includes("thickness")||"iconrotation"===t?"number":t.includes("padding")||t.includes("margin")||t.includes("radius")?"object":t.startsWith("show")||t.startsWith("enable")||t.startsWith("disable")||t.startsWith("is")||t.startsWith("allow")?"boolean":"string"}(e);switch(l){case"color":return e.includes("Background")||e.includes("Bg")?"#ffffff":e.includes("Border")?"#dddddd":"#000000";case"number":return e.includes("FontSize")||e.includes("Size")||e.includes("Padding")?16:e.includes("Margin")?8:e.includes("BorderWidth")||e.includes("Thickness")?1:e.includes("Radius")?4:0;case"boolean":return!1;case"object":return e.includes("Padding")||e.includes("Margin")?n:e.includes("Radius")?r:{};default:return e.includes("FontWeight")?"400":e.includes("FontStyle")?"normal":e.includes("Alignment")||e.includes("Align")?"left":e.includes("Transform")||e.includes("Decoration")?"none":e.includes("BorderStyle")?"solid":""}}(t,l)}(v,e,"color");return(0,V.createElement)("div",{key:e},(0,V.createElement)(N,{label:b(T,e),value:t,onChange:t=>m(e,t),disableAlpha:!1}),C&&(0,V.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginTop:"4px",marginBottom:"16px"}},C))}case"RangeControl":{var k;const t=D(v),l=D(g);return(0,V.createElement)(A.RangeControl,{key:e,label:b(T,e),value:null!==(k=null!=t?t:l)&&void 0!==k?k:0,onChange:t=>m(e,t),min:null!=u?u:0,max:null!=d?d:100,step:null!=p?p:1,help:C,disabled:E})}case"SelectControl":{var x;const t=function(e){return Array.isArray(e)?e.map(e=>"string"==typeof e?{label:e.charAt(0).toUpperCase()+e.slice(1),value:e}:e):[]}(c),l=null!==(x=null!=g?g:t[0]?.value)&&void 0!==x?x:"";return(0,V.createElement)(A.SelectControl,{key:e,label:b(T,e),value:null!=v?v:l,options:t,onChange:t=>m(e,t),help:C,disabled:E,__next40pxDefaultSize:!0})}case"TextControl":var S;return(0,V.createElement)(A.TextControl,{key:e,label:b(T,e),value:null!==(S=null!=v?v:g)&&void 0!==S?S:"",onChange:t=>m(e,t),help:C,disabled:E,__next40pxDefaultSize:!0});case"ToggleControl":var O;return(0,V.createElement)(A.ToggleControl,{key:e,label:b(T,e),checked:null!==(O=null!=v?v:g)&&void 0!==O&&O,onChange:t=>m(e,t),help:C,__nextHasNoMarginBottom:!0,disabled:E});case"FontFamilyControl":var P;return(0,V.createElement)(A.TextControl,{key:e,label:b(T,e),value:null!==(P=null!=v?v:g)&&void 0!==P?P:"",onChange:t=>m(e,t),help:C,__next40pxDefaultSize:!0});case"IconPicker":{var w;const t=C||"Use a character (▾, ▸, etc.), Unicode code, or image URL. Use 'none' to disable.";return(0,V.createElement)(A.TextControl,{key:e,label:b(T,e),value:null!==(w=null!=v?v:g)&&void 0!==w?w:"",onChange:t=>m(e,t),placeholder:"Enter icon char or image URL",help:t,__next40pxDefaultSize:!0})}case"UnitControl":{var z;const t=[{value:"px",label:"px",default:!0},{value:"%",label:"%"},{value:"rem",label:"rem"},{value:"em",label:"em"}],l=f?f.map((e,t)=>({value:e,label:e,default:0===t})):t;return(0,V.createElement)("div",{key:e,style:{marginBottom:"16px"}},(0,V.createElement)(A.__experimentalUnitControl,{label:b(T,e),value:null!==(z=null!=v?v:g)&&void 0!==z?z:"",onChange:t=>m(e,t),units:l,disabled:E,__next40pxDefaultSize:!0}),C&&(0,V.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginTop:"4px"}},C))}case"BorderRadiusControl":{var B,L,R,I;const l=v||g||{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},o=(t,o)=>{const n={...l,[t]:o};m(e,n)},n=t.unit||"px";return(0,V.createElement)("div",{key:e,style:{marginBottom:"16px"}},(0,V.createElement)("h4",{style:{margin:"0 0 8px 0",fontSize:"13px"}},b(T,e)),C&&(0,V.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginTop:"4px",marginBottom:"12px"}},C),(0,V.createElement)(A.RangeControl,{label:`Top Left (${n})`,value:null!==(B=l.topLeft)&&void 0!==B?B:0,onChange:e=>o("topLeft",e),min:null!=u?u:0,max:null!=d?d:60,step:null!=p?p:1}),(0,V.createElement)(A.RangeControl,{label:`Top Right (${n})`,value:null!==(L=l.topRight)&&void 0!==L?L:0,onChange:e=>o("topRight",e),min:null!=u?u:0,max:null!=d?d:60,step:null!=p?p:1}),(0,V.createElement)(A.RangeControl,{label:`Bottom Right (${n})`,value:null!==(R=l.bottomRight)&&void 0!==R?R:0,onChange:e=>o("bottomRight",e),min:null!=u?u:0,max:null!=d?d:60,step:null!=p?p:1}),(0,V.createElement)(A.RangeControl,{label:`Bottom Left (${n})`,value:null!==(I=l.bottomLeft)&&void 0!==I?I:0,onChange:e=>o("bottomLeft",e),min:null!=u?u:0,max:null!=d?d:60,step:null!=p?p:1}))}default:return console.warn(`[GenericPanel] Unknown control type "${o}" for attribute "${e}"`),null}};return(0,V.createElement)(A.PanelBody,{title:p,initialOpen:u},g.map(e=>h(e.name,e)))};function F({schema:e={},attributes:t={},setAttributes:l,effectiveValues:o={},theme:n,cssDefaults:r={}}){if(!l)return console.warn("[SchemaPanels] Missing required prop: setAttributes"),null;if(!e||!e.groups)return console.warn("[SchemaPanels] Missing schema or schema.groups"),null;const s=Object.entries(e.groups).map(([e,t])=>({name:e,...t})).sort((e,t)=>(void 0!==e.order?e.order:999)-(void 0!==t.order?t.order:999));return(0,V.createElement)(V.Fragment,null,s.map(s=>{const{name:a,initialOpen:i=!1,pago:c="nao"}=s;return Object.values(e.attributes||{}).some(e=>e.group===a)?(0,V.createElement)(H,{key:a,schema:e,schemaGroup:a,attributes:t,setAttributes:l,effectiveValues:o,theme:n,cssDefaults:r,initialOpen:i,pago:c}):null}))}function $({currentTheme:e,themes:t={}}){const l=t&&t[e]?t[e]:null;(0,L.Yz)("[DEBUG] CustomizationWarning - currentTheme:",e),(0,L.Yz)("[DEBUG] CustomizationWarning - themes:",t),(0,L.Yz)("[DEBUG] CustomizationWarning - theme object:",l),(0,L.Yz)("[DEBUG] CustomizationWarning - theme?.name:",l?.name);const o=l?.name||e||"Default",n="Default"===o||""===e;return(0,L.Yz)("[DEBUG] CustomizationWarning - final themeName:",o),(0,L.Yz)("[DEBUG] CustomizationWarning - isDefaultTheme:",n),(0,V.createElement)(A.Notice,{status:"warning",isDismissible:!1,style:{marginTop:"50px",marginBottom:"50px"}},(0,V.createElement)("p",null,(0,V.createElement)("strong",null,"Note:")," This block has custom modifications."),n?(0,V.createElement)(V.Fragment,null,(0,V.createElement)("p",null,(0,V.createElement)("strong",null,"Default")," theme cannot be changed."),(0,V.createElement)("p",null,"To keep your customizations permanently and reuse them across multiple blocks, use ",(0,V.createElement)("strong",null,"Save as New Theme"),"."),(0,V.createElement)("p",null,"To remove all changes and return to the original ",(0,V.createElement)("strong",null,"Default")," settings, use ",(0,V.createElement)("strong",null,"Reset Modifications"),".")):(0,V.createElement)(V.Fragment,null,(0,V.createElement)("p",null,"You're currently using ",(0,V.createElement)("strong",null,o)," with changes applied specifically to this block. If you update ",(0,V.createElement)("strong",null,o),", any parts of the theme that aren't overridden by your customizations will change accordingly."),(0,V.createElement)("p",null,"To keep your customizations permanently and reuse them across multiple blocks, use ",(0,V.createElement)("strong",null,"Save as New Theme")," or ",(0,V.createElement)("strong",null,"Update Theme"),"."),(0,V.createElement)("p",null,"To remove all changes and return to the original ",(0,V.createElement)("strong",null,o)," settings, use ",(0,V.createElement)("strong",null,"Reset Modifications"),".")))}const _=window.ReactDOM;function U(e,t,l=!1){return function(e,t,l=null){const o=[];return function e(n){n.forEach(n=>{n.name===`custom/${t}`&&(l&&!l(n)||o.push({clientId:n.clientId,attributes:n.attributes})),n.innerBlocks?.length>0&&e(n.innerBlocks)})}(e),o}((0,s.select)("core/block-editor").getBlocks(),e,e=>{const o=e.attributes||{};if(o.currentTheme!==t)return!1;if(l){const e=o.customizations||{};return 0===Object.keys(e).length}return!0})}function M(e,t,l){const{createSuccessNotice:o}=(0,s.dispatch)("core/notices");if(0===l)return;let n;"update"===e?n=`Updated theme "${t}" and applied changes to ${l} block(s) on this page.`:"delete"===e&&(n=`Deleted theme "${t}" and reset ${l} block(s) to defaults.`),o(n,{type:"snackbar",isDismissible:!0})}function j({blockType:e,schema:t,attributes:l,setAttributes:o,allDefaults:n}){const r=(0,R.useRef)(!1),{themes:a,themesLoaded:i}=(0,s.useSelect)(t=>{const{getThemes:l,areThemesLoaded:o}=t(c);return{themes:l(e)||{},themesLoaded:o(e)}},[e]),{loadThemes:u,createTheme:d,updateTheme:p,deleteTheme:g,renameTheme:m}=(0,s.useDispatch)(c);(0,R.useEffect)(()=>{i||u(e)},[i,u,e]);const b=(0,R.useMemo)(()=>{const e=Object.entries(t.attributes).filter(([,e])=>!0!==e.themeable).map(([e])=>e);return e.includes("customizations")||e.push("customizations"),e},[t]),h=(0,R.useMemo)(()=>a[l.currentTheme],[a,l.currentTheme]),y=(0,R.useMemo)(()=>h?w(n,h.values||{}):n,[h,n]),f=(0,R.useMemo)(()=>{if(!i)return!1;if(l.currentTheme&&!a[l.currentTheme])return!1;const e=[],t=Object.keys(l).some(t=>{if(b.includes(t))return!1;const o=l[t],n=y[t];if(null==o)return!1;if(void 0===n)return!1;let r=!1;return r="object"==typeof o&&null!==o?JSON.stringify(o)!==JSON.stringify(n):o!==n,r&&e.push({key:t,attrValue:o,expectedValue:n}),r});return e.length>0&&(console.log("\n[IS_CUSTOMIZED] Found differences:"),e.forEach(({key:e,attrValue:t,expectedValue:l})=>{console.log(`  - ${e}:`,t,"!==",l)})),t},[l,y,b,i,a]),[v,T]=(0,R.useState)({});(0,R.useEffect)(()=>{if(!i)return;const t=z(l,b),o=l.currentTheme||"";Object.keys(t).some(e=>{if(b.includes(e))return!1;const l=t[e],o=y[e];return null!=l&&void 0!==o&&("object"==typeof l&&null!==l?JSON.stringify(l)!==JSON.stringify(o):l!==o)})&&T(l=>{const n=l[o];return JSON.stringify(t)!==JSON.stringify(n)?((0,L.Yz)(`[SESSION CACHE] [${e.toUpperCase()}] Updating cache for theme:`,o),{...l,[o]:t}):l})},[l,y,b,i,e]),(0,R.useEffect)(()=>{if(r.current)return console.log("\n[AUTO-UPDATE CUSTOMIZATIONS] SKIPPED - Theme operation just completed"),void(r.current=!1);console.log("\n[AUTO-UPDATE CUSTOMIZATIONS] Running...");const e={};Object.keys(l).forEach(t=>{if(b.includes(t)||"customizations"===t)return;const o=l[t],n=y[t];if(null==o)return;if(void 0===n)return;let r=!1;r="object"==typeof o&&null!==o?JSON.stringify(o)!==JSON.stringify(n):o!==n,r&&(e[t]=o,console.log(`  - Found difference in "${t}":`,o,"!==",n))});const t=l.customizations||{};JSON.stringify(e)!==JSON.stringify(t)?(console.log("  - Updating customizations attribute:",e),console.log("  - This will set isCustomized =",Object.keys(e).length>0),o({customizations:e})):console.log("  - No changes to customizations")},[l,y,b,e]);const C=(0,R.useCallback)(async t=>{console.log("\n[SAVE NEW THEME] Starting for:",t);const s=l.currentTheme||"",a=v[s];console.log("[SAVE NEW THEME] Current theme:",s||"(Default)"),console.log("[SAVE NEW THEME] Cached snapshot exists?",!!a),console.log("[SAVE NEW THEME] Cached snapshot keys:",Object.keys(a||{}));const i=a&&Object.keys(a).length>0?a:z(l,b);console.log("[SAVE NEW THEME] Current snapshot keys:",Object.keys(i)),console.log("[SAVE NEW THEME] Current snapshot values:",i);const c=P(i,n,b);if(console.log("[SAVE NEW THEME] Calculated deltas keys:",Object.keys(c)),console.log("[SAVE NEW THEME] Calculated deltas values:",c),0===Object.keys(c).length)return void console.error("[SAVE NEW THEME] ERROR: Deltas are empty! Cannot save theme.");await d(e,t,c),await new Promise(e=>setTimeout(e,50));const u={...w(n,c||{})};b.forEach(e=>{"currentTheme"!==e&&delete u[e]}),u.currentTheme=t,u.customizations={},console.log("[SAVE NEW THEME] Setting skip flag to prevent auto-update customizations"),r.current=!0,(0,_.flushSync)(()=>{o(u)}),T(e=>{const l={...e};return delete l[s],delete l[t],l}),console.log("[SAVE NEW THEME] Complete - block should show:",t)},[l,v,b,n,d,e,o,a]),E=(0,R.useCallback)(async()=>{console.log("\n[UPDATE THEME] Starting for:",l.currentTheme);const t=l.currentTheme||"",a=v[t],i=P(a&&Object.keys(a).length>0?a:z(l,b),n,b);try{await p(e,l.currentTheme,i)}catch(e){if("theme_not_found"===e?.code||404===e?.status)return void o({currentTheme:""});throw e}const c=w(n,i),u={};b.forEach(e=>{void 0!==l[e]&&(u[e]=l[e])}),Object.keys(c).forEach(e=>{b.includes(e)||(u[e]=c[e])}),Object.keys(l).forEach(e=>{b.includes(e)||c.hasOwnProperty(e)||void 0===l[e]||(u[e]=void 0)}),u.customizations={},console.log("[UPDATE THEME] Setting skip flag to prevent auto-update customizations"),r.current=!0,(0,_.flushSync)(()=>{o(u)}),T(e=>{const l={...e};return delete l[t],l}),console.log("[UPDATE THEME] Batch updating other clean blocks on this page...");const d=function(e,t,l,o=[]){console.log(`\n[BATCH UPDATE] Starting for theme "${t}"`);const n=U(e,t,!0);return console.log(`[BATCH UPDATE] Found ${n.length} clean block(s) using "${t}"`),0===n.length?0:(n.forEach(({clientId:e,attributes:t})=>{const n={};Object.keys(l).forEach(e=>{o.includes(e)||t[e]!==l[e]&&(n[e]=l[e])}),n.customizations={},Object.keys(n).length>0&&(console.log(`[BATCH UPDATE] Updating block ${e}:`,Object.keys(n)),(0,s.dispatch)("core/block-editor").updateBlockAttributes(e,n))}),console.log(`[BATCH UPDATE] Complete - updated ${n.length} block(s)`),n.length)}(e,l.currentTheme,c,b);d>0&&M("update",l.currentTheme,d),console.log("[UPDATE THEME] Complete")},[l,v,b,n,p,e,o]),k=(0,R.useCallback)(async()=>{console.log("\n[DELETE THEME] Starting for:",l.currentTheme);const t=l.currentTheme;await g(e,t);const a={...n};a.currentTheme="",b.forEach(e=>{"currentTheme"!==e&&delete a[e]}),a.customizations={},console.log("[DELETE THEME] Setting skip flag to prevent auto-update customizations"),r.current=!0,(0,_.flushSync)(()=>{o(a)}),T({}),console.log("[DELETE THEME] Batch resetting other blocks on this page using deleted theme...");const i=function(e,t,l,o=[]){console.log(`\n[BATCH RESET] Starting for deleted theme "${t}"`);const n=U(e,t,!1);return console.log(`[BATCH RESET] Found ${n.length} block(s) using "${t}"`),0===n.length?0:(n.forEach(({clientId:e})=>{const t={...l};o.forEach(e=>{"currentTheme"!==e&&"customizations"!==e&&delete t[e]}),t.currentTheme="",t.customizations={},console.log(`[BATCH RESET] Resetting block ${e} to defaults`),(0,s.dispatch)("core/block-editor").updateBlockAttributes(e,t)}),console.log(`[BATCH RESET] Complete - reset ${n.length} block(s)`),n.length)}(e,t,n,b);i>0&&M("delete",t,i),console.log("[DELETE THEME] Complete - reset to Default")},[l.currentTheme,g,e,n,b,o]),x=(0,R.useCallback)(async(t,l)=>{await m(e,t,l),o({currentTheme:l})},[m,e,o]),S=(0,R.useCallback)(()=>{console.log("\n[RESET CUSTOMIZATIONS] Starting");const e={};Object.keys(l).forEach(t=>{if(b.includes(t))return;const o=l[t],n=y[t];null!=o&&o!==n&&(e[t]=void 0!==n?n:void 0)}),e.currentTheme=l.currentTheme,e.customizations={},console.log("[RESET CUSTOMIZATIONS] Setting skip flag to prevent auto-update customizations"),r.current=!0,(0,_.flushSync)(()=>{o(e)});const t=l.currentTheme||"";T(e=>{const l={...e};return delete l[t],l}),console.log("[RESET CUSTOMIZATIONS] Complete")},[l,y,b,o]),O=(0,R.useCallback)((e,t=!1)=>{if(e&&!a[e])return void o({currentTheme:""});const r=a[e],s=e||"";let i;i=t&&v[s]?v[s]:r?w(n,r.values||{}):n;const c={};Object.keys(l).forEach(e=>{if(b.includes(e))return;const t=l[e],o=i[e];t!==o&&(c[e]=void 0!==o?o:void 0)}),Object.keys(i).forEach(e=>{b.includes(e)||l.hasOwnProperty(e)||void 0===i[e]||(c[e]=i[e])}),c.currentTheme=e,o(c)},[a,v,n,l,b,o]);return{themes:a,themesLoaded:i,currentTheme:h,expectedValues:y,isCustomized:f,sessionCache:v,excludeFromCustomizationCheck:b,handlers:{handleSaveNewTheme:C,handleUpdateTheme:E,handleDeleteTheme:k,handleRenameTheme:x,handleResetCustomizations:S,handleThemeChange:O}}}const W=e=>{const t=(0,R.useRef)(null);return(0,R.useEffect)(()=>{if(t.current){const l=e||"left";"left"===l?(t.current.style.setProperty("margin-left","0","important"),t.current.style.setProperty("margin-right","auto","important")):"center"===l?(t.current.style.setProperty("margin-left","auto","important"),t.current.style.setProperty("margin-right","auto","important")):"right"===l&&(t.current.style.setProperty("margin-left","auto","important"),t.current.style.setProperty("margin-right","0","important"))}},[e]),t}},427:e=>{e.exports=window.wp.components},591:(e,t,l)=>{l.d(t,{s:()=>o});const o=e=>e?`gutplus-align-${e}`:"gutplus-align-left"},609:e=>{e.exports=window.React},631:(e,t,l)=>{l.d(t,{Yz:()=>r});const o=()=>"undefined"!=typeof window&&!0===window.WP_DEBUG,n=()=>"undefined"!=typeof window&&!0===window.GUTTEMBERG_DEBUG_VERBOSE;function r(...e){o()&&n()&&console.log(...e)}},767:(e,t,l)=>{function o(e){return null!=e}function n(e,t,l,n){return t&&o(t[e])?t[e]:l&&o(l[e])?l[e]:n&&o(n[e])?n[e]:null}function r(e,t,l){const o=new Set;e&&"object"==typeof e&&Object.keys(e).forEach(e=>o.add(e)),t&&"object"==typeof t&&Object.keys(t).forEach(e=>o.add(e)),l&&"object"==typeof l&&Object.keys(l).forEach(e=>o.add(e));const r={};for(const s of o)r[s]=n(s,e,t,l);return r}function s(e,t,l,n){if(!t||!o(t[e]))return!1;const r=t[e];return l&&o(l[e])?"object"==typeof r&&null!==r?JSON.stringify(r)!==JSON.stringify(l[e]):r!==l[e]:!n||!o(n[e])||("object"==typeof r&&null!==r?JSON.stringify(r)!==JSON.stringify(n[e]):r!==n[e])}l.d(t,{MI:()=>s,lS:()=>r})},810:(e,t,l)=>{function o(){const e=document.querySelectorAll(".gutplus-toc");e&&0!==e.length&&e.forEach(e=>{try{if(!e)return;const t=e.getAttribute("data-toc-id");if(!t)return void console.warn("TOC block missing data-toc-id attribute, skipping");const l={tocId:t,filterMode:e.getAttribute("data-filter-mode")||"include-all",includeLevels:(e.getAttribute("data-include-levels")||"2,3,4,5,6").split(",").map(Number),includeClasses:e.getAttribute("data-include-classes")||"",excludeLevels:(e.getAttribute("data-exclude-levels")||"").split(",").map(Number).filter(Boolean),excludeClasses:e.getAttribute("data-exclude-classes")||"",depthLimit:parseInt(e.getAttribute("data-depth-limit")||"0",10)||null,includeAccordions:"false"!==e.getAttribute("data-include-accordions"),includeTabs:"false"!==e.getAttribute("data-include-tabs"),numberingStyle:e.getAttribute("data-numbering-style")||"none",smoothScroll:"true"===e.getAttribute("data-smooth-scroll"),scrollOffset:parseInt(e.getAttribute("data-scroll-offset")||"0",10),autoHighlight:"true"===e.getAttribute("data-auto-highlight"),isCollapsible:"true"===e.getAttribute("data-collapsible"),initiallyCollapsed:"true"===e.getAttribute("data-initially-collapsed"),clickBehavior:e.getAttribute("data-click-behavior")||"navigate"};!function(e,t){if(e&&t)try{const l=function(e){if(!e)return[];const t=e.getAttribute("data-toc-items");if(!t)return[];try{const e=decodeURIComponent(t),l=JSON.parse(e);if(Array.isArray(l))return l.filter(e=>!e.hidden).map((e,t)=>{const l=e.anchor||e.id||`heading-${t}`;return{anchor:l,id:l,text:e.text||"",level:e.level||2}}).filter(e=>e.id)}catch(e){console.warn("Failed to parse curated TOC items",e)}return[]}(e),o=function(e,t){const l=document.querySelector(".entry-content, main, article, body");if(!l)return[];const o=l.querySelectorAll("h2, h3, h4, h5, h6"),n=[];if(o.forEach(e=>{if(e.closest(".gutplus-toc"))return;const l=parseInt(e.tagName.charAt(1),10),o=e.classList.contains("accordion-heading")||e.querySelector(".accordion-title-text"),r=e.querySelector(".tab-button-text");if(o&&!t.includeAccordions)return;if(r&&!t.includeTabs)return;let s="";const a=e.querySelector(".accordion-title-text, .tab-button-text");s=a?a.textContent.trim():e.textContent.trim();const i=e.id||"",c=Array.from(e.classList);(function(e,t){const{filterMode:l,includeLevels:o,includeClasses:n,excludeLevels:r,excludeClasses:s}=t;if("include-only"===l){const t=o.includes(e.level),l=!!n&&n.split(",").some(t=>e.classes.includes(t.trim()));return t||l}return"exclude"!==l||!r.includes(e.level)&&(!s||!s.split(",").some(t=>e.classes.includes(t.trim())))})({level:l,classes:c},t)&&n.push({level:l,text:s,id:i,classes:c,element:e})}),t.depthLimit){const e=Math.min(...n.map(e=>e.level));return n.filter(l=>l.level-e<t.depthLimit)}return n}(0,t),r=l&&l.length>0?function(e,t,l){if(!Array.isArray(e)||0===e.length)return t||[];const o=Array.isArray(t)?t:[],r=new Map;o.forEach(e=>{e&&e.id&&r.set(e.id,e)});const s=new Set;return e.map((e,t)=>{const a=e.anchor||e.id||`heading-${l?.tocId||"toc"}-${t}`;let i=r.get(a);return i||(i=o.find(t=>!(s.has(t)||e.level&&t.level!==e.level||n(t.text)!==n(e.text)))),i?(s.add(i),i.element&&i.element.id!==a&&(i.element.id=a),{...i,id:a}):{level:e.level||2,text:e.text||"",id:a,element:null}})}(l,o,t):o;if(!r)return void console.warn("Failed to detect headings");r.forEach((e,l)=>{try{e&&e.element&&!e.element.id&&(e.element.id=`heading-${t.tocId}-${l}`,e.id=e.element.id)}catch(e){console.error("Failed to add ID to heading:",e)}});const s=e.querySelector(".toc-list");if(s)try{!function(e,t){if(e.innerHTML="",0===t.length)return void(e.innerHTML='<li class="toc-empty">No headings found.</li>');const l=document.createDocumentFragment();t.forEach(e=>{const t=document.createElement("li"),o=e.level-1;t.className=`toc-item toc-level-${o}`;const n=document.createElement("a");n.href=`#${e.id}`,n.className="toc-link",n.textContent=e.text,n.setAttribute("data-heading-id",e.id),t.appendChild(n),l.appendChild(t)}),e.appendChild(l)}(s,r)}catch(e){console.error("Failed to render TOC list:",e)}if(t.smoothScroll)try{!function(e,t){if(!e||!t)return;const l=e.querySelectorAll(".toc-link");l&&0!==l.length&&l.forEach(l=>{l&&l.addEventListener("click",o=>{try{o.preventDefault();const n=l.getAttribute("href");if(!n||n.length<=1)return void console.warn("Invalid TOC link href");const r=n.slice(1),s=document.getElementById(r);if(!s)return void console.warn("TOC target element not found:",r);const a=s.getBoundingClientRect().top+window.pageYOffset-t.scrollOffset;window.scrollTo({top:a,behavior:"smooth"}),history.pushState?history.pushState(null,null,`#${r}`):window.location.hash=r,s.focus({preventScroll:!0}),"navigate-and-collapse"===t.clickBehavior&&t.isCollapsible&&setTimeout(()=>{try{const t=e.querySelector(".toc-toggle-button"),l=e.querySelector(".toc-content"),o=e.querySelector(".toc-collapse-icon");t&&l&&(l.style.display="none",t.setAttribute("aria-expanded","false"),o&&(o.style.transform="rotate(-90deg)"))}catch(e){console.error("Failed to collapse TOC:",e)}},600)}catch(e){console.error("Failed to handle smooth scroll:",e)}})})}(e,t)}catch(e){console.error("Failed to setup smooth scroll:",e)}if(t.autoHighlight)try{!function(e,t){if(!e||!t||0===t.length)return;const l=e.querySelectorAll(".toc-link");if(!l||0===l.length)return;const o=t.map(e=>e.element).filter(e=>e);if(0===o.length)return;const n=()=>{l.forEach(e=>{e&&e.classList.remove("active")})};let r=!1;const s=()=>{r||(window.requestAnimationFrame(()=>{try{const t=window.pageYOffset+100;let l=null;for(let e=o.length-1;e>=0;e--){const n=o[e];if(n&&void 0!==n.offsetTop&&t>=n.offsetTop){l=n;break}}l&&l.id?(t=>{if(!t)return;n();const l=e.querySelector(`.toc-link[data-heading-id="${t}"]`);l&&l.classList.add("active")})(l.id):n()}catch(e){console.error("Scroll spy error:",e)}r=!1}),r=!0)};try{s()}catch(e){console.error("Initial scroll spy check failed:",e)}window.addEventListener("scroll",s,{passive:!0})}(e,r)}catch(e){console.error("Failed to setup scroll spy:",e)}if(t.isCollapsible)try{!function(e,t){if(!e||!t)return;const l=e.querySelector(".toc-toggle-button"),o=e.querySelector(".toc-content"),n=e.querySelector(".toc-collapse-icon");if(!l||!o)return void console.warn("TOC collapsible elements not found");const r=t.initiallyCollapsed;o.style.display=r?"none":"block",l.setAttribute("aria-expanded",!r);const s=()=>{try{"none"===o.style.display?(o.style.display="block",l.setAttribute("aria-expanded","true"),n&&(n.style.transform="rotate(0deg)")):(o.style.display="none",l.setAttribute("aria-expanded","false"),n&&(n.style.transform="rotate(-90deg)"))}catch(e){console.error("Failed to toggle TOC:",e)}};l.addEventListener("click",s),l.addEventListener("keydown",e=>{e&&("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s()))})}(e,t)}catch(e){console.error("Failed to setup collapsible:",e)}}catch(e){console.error("Failed to initialize TOC:",e)}else console.warn("Invalid block or config in initTOC")}(e,l)}catch(e){console.error("Failed to initialize TOC block:",e)}})}function n(e=""){return e.toString().trim().toLowerCase()}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{try{o()}catch(e){console.error("TOC block initialization failed:",e)}});else try{o()}catch(e){console.error("TOC block initialization failed:",e)}},957:(e,t,l)=>{function o(e={}){return e}l.d(t,{O:()=>o})}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const o=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"custom/toc","version":"1.0.0","title":"Table of Contents","category":"design","icon":"list-view","description":"Automatically generates a navigable table of contents from post headings.","keywords":["toc","table of contents","navigation","headings"],"textdomain":"guttemberg-plus","editorScript":"file:../../build/blocks/toc/index.js","editorStyle":["file:../../assets/css/toc-variables.css","file:../../build/blocks/toc/index.css"],"viewStyle":["file:../../assets/css/toc-variables.css","file:../../build/blocks/toc/toc.css"],"viewScript":"file:../../build/blocks/toc/frontend.js","supports":{"html":false,"align":["wide","full"],"anchor":true,"className":false,"customClassName":true,"spacing":{"margin":true,"padding":false}},"attributes":{"tocId":{"type":"string"},"currentTheme":{"type":"string","default":""},"customizations":{"type":"object"},"customizationCache":{"type":"object"},"tocWidth":{"type":"string"},"tocHorizontalAlign":{"type":"string","default":"left"}},"providesContext":{},"usesContext":[]}');var r=l(609),s=l(87);const a=window.wp.blockEditor;var i=l(427);const c=window.wp.i18n;var u=l(143),d=l(393);const p=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"Table of Contents Block Theme Configuration","version":"1.0.0","description":"Complete theme and appearance configuration for Table of Contents blocks","blockType":"toc","blockName":"Table of Contents","manualSyncRequired":{"description":"CSS properties are auto-generated from cssVar/cssSelector/cssProperty fields","files":["blocks/toc/src/_theme-generated.scss (AUTO-GENERATED - do not edit)"],"instructions":"CSS variable declarations are automatically generated. Only edit style.scss for structural/layout CSS. To add CSS variables, add cssVar, cssSelector, and cssProperty to schema attributes."},"groups":{"blockOptions":{"title":"Block Options","description":"Behavior and core options","order":1,"initialOpen":true},"blockBorders":{"title":"Block Borders","description":"Wrapper background, borders, and shadows","order":2,"initialOpen":false},"titleColors":{"title":"Title Colors","description":"Title colors","order":3,"initialOpen":false},"titleTypography":{"title":"Title Typography","description":"Title typography and padding","order":4,"initialOpen":false},"linkColors":{"title":"Link Colors","description":"Link and numbering colors","order":5,"initialOpen":false},"levelStyling":{"title":"Level Styling","description":"Per-level colors and typography","order":6,"initialOpen":false},"spacingLayout":{"title":"Spacing & Layout","description":"Padding, spacing, indent, positioning","order":7,"initialOpen":false},"collapseIcon":{"title":"Collapse Icon","description":"Collapse icon styles","order":8,"initialOpen":false}},"attributes":{"tocId":{"type":"string","default":"","group":"blockOptions","label":"TOC ID","description":"Unique identifier for the table of contents","themeable":false,"reason":"structural","order":21},"showTitle":{"type":"boolean","default":true,"group":"blockOptions","label":"Show Title","description":"Display the TOC title header","themeable":false,"reason":"structural","order":3},"titleText":{"type":"string","default":"Table of Contents","group":"blockOptions","label":"Title Text","description":"The title displayed above the table of contents","themeable":false,"reason":"content","order":4},"currentTheme":{"type":"string","default":"","group":"blockOptions","label":"Theme","description":"Currently active theme name (empty = Default)","themeable":false,"reason":"structural","order":22},"tocItems":{"type":"array","default":[],"group":"blockOptions","label":"Curated TOC Items","description":"Persisted TOC entries with anchors and levels","themeable":false,"reason":"structural","order":23},"deletedHeadingIds":{"type":"array","default":[],"group":"blockOptions","label":"Deleted Heading IDs","description":"Anchors removed from scans until reset","themeable":false,"reason":"structural","order":24},"filterMode":{"type":"string","default":"include-all","group":"blockOptions","label":"Filter Mode","description":"How headings are filtered for inclusion","themeable":false,"options":["include-all","include-only","exclude-only"],"order":5},"includeLevels":{"type":"array","default":[2,3,4,5,6],"group":"blockOptions","label":"Include Heading Levels","description":"Which heading levels to include (H2-H6)","themeable":false,"order":6},"includeClasses":{"type":"string","default":"","group":"blockOptions","label":"Include Classes","description":"CSS classes to include in TOC","themeable":false,"order":7},"excludeLevels":{"type":"array","default":[],"group":"blockOptions","label":"Exclude Heading Levels","description":"Which heading levels to exclude","themeable":false,"order":8},"excludeClasses":{"type":"string","default":"","group":"blockOptions","label":"Exclude Classes","description":"CSS classes to exclude from TOC","themeable":false,"order":9},"depthLimit":{"type":"number","default":null,"group":"blockOptions","label":"Depth Limit","description":"Maximum nesting depth to display","themeable":false,"order":10},"includeAccordions":{"type":"boolean","default":true,"group":"blockOptions","label":"Include Accordion Headings","description":"Include headings from accordion blocks when they have a heading level set","themeable":false,"reason":"structural","order":11},"includeTabs":{"type":"boolean","default":true,"group":"blockOptions","label":"Include Tab Headings","description":"Include headings from tabs blocks when they have a heading level set","themeable":false,"reason":"structural","order":12},"numberingStyle":{"type":"string","default":"none","group":"blockOptions","label":"Numbering Style","description":"Style of numbering for TOC items","themeable":false,"options":["none","decimal","decimal-leading-zero","roman","alpha"],"order":13},"isCollapsible":{"type":"boolean","default":false,"group":"blockOptions","label":"Collapsible","description":"Allow the TOC to be collapsed/expanded","themeable":false,"order":14},"initiallyCollapsed":{"type":"boolean","default":false,"group":"blockOptions","label":"Initially Collapsed","description":"Start with TOC collapsed","themeable":false,"order":15},"positionType":{"type":"string","default":"default","group":"blockOptions","label":"Position Type","description":"CSS positioning type","themeable":false,"options":["default","sticky","fixed"],"order":16},"smoothScroll":{"type":"boolean","default":true,"group":"blockOptions","label":"Smooth Scroll","description":"Enable smooth scrolling to headings","themeable":false,"order":17},"scrollOffset":{"type":"number","default":0,"group":"blockOptions","label":"Scroll Offset","description":"Offset in pixels when scrolling to heading","themeable":false,"order":18},"autoHighlight":{"type":"boolean","default":true,"group":"blockOptions","label":"Auto Highlight","description":"Highlight current section in TOC","themeable":false,"order":19},"clickBehavior":{"type":"string","default":"navigate","group":"blockOptions","label":"Click Behavior","description":"What happens when clicking a TOC item","themeable":false,"options":["navigate","scroll"],"order":20},"tocWidth":{"type":"string","default":"100%","group":"blockOptions","label":"Block Width","description":"TOC container width (e.g., 100%, 500px)","themeable":false,"control":"TextControl","order":1},"tocHorizontalAlign":{"type":"string","default":"center","group":"blockOptions","label":"Block Horizontal Alignment","description":"Horizontal alignment of the TOC block","themeable":false,"control":"SelectControl","options":["left","center","right"],"order":2},"wrapperBackgroundColor":{"type":"string","default":"#ffffff","cssVar":"toc-wrapper-background-color","group":"blockBorders","label":"Block Background","description":"Background color of the TOC wrapper","themeable":true,"control":"ColorPicker","order":1,"appliesTo":"wrapper","cssProperty":"background-color"},"blockBorderColor":{"type":"string","default":"#dddddd","cssVar":"toc-border-color","group":"blockBorders","label":"Block Border Color","description":"Border color of the TOC wrapper","themeable":true,"control":"ColorPicker","order":2,"appliesTo":"wrapper","cssProperty":"border-color"},"titleColor":{"type":"string","default":"#333333","cssVar":"toc-title-color","group":"titleColors","label":"Title Text Color","description":"Text color for the TOC title","themeable":true,"control":"ColorPicker","order":1,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"color"},"titleBackgroundColor":{"type":"string","default":"transparent","cssVar":"toc-title-background-color","group":"titleColors","label":"Title Background","description":"Background color for the TOC title","themeable":true,"control":"ColorPicker","order":2,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"background-color"},"linkColor":{"type":"string","default":"#0073aa","cssVar":"toc-link-color","group":"linkColors","label":"Link Color","description":"Default color for TOC links","themeable":true,"control":"ColorPicker","order":1,"appliesTo":"link","cssProperty":"color"},"linkHoverColor":{"type":"string","default":"#005177","cssVar":"toc-link-hover-color","group":"linkColors","label":"Link Hover Color","description":"Color when hovering over links","themeable":true,"control":"ColorPicker","state":"hover","order":2,"appliesTo":"link","cssProperty":"color"},"linkActiveColor":{"type":"string","default":"#005177","cssVar":"toc-link-active-color","group":"linkColors","label":"Link Active Color","description":"Color for the currently active link","themeable":true,"control":"ColorPicker","state":"active","order":3,"appliesTo":"link","cssProperty":"color"},"linkVisitedColor":{"type":"string","default":"#0073aa","cssVar":"toc-link-visited-color","group":"linkColors","label":"Link Visited Color","description":"Color for visited links","themeable":true,"control":"ColorPicker","state":"visited","order":4,"appliesTo":"link","cssProperty":"color"},"numberingColor":{"type":"string","default":"#0073aa","cssVar":"toc-numbering-color","group":"linkColors","label":"Numbering Color","description":"Color for list numbering","themeable":true,"control":"ColorPicker","order":5,"appliesTo":["list","nestedList"],"cssProperty":"color"},"level1Color":{"type":"string","default":"#0073aa","cssVar":"toc-level1-color","group":"levelStyling","label":"Level 1 Text Color","description":"Text color for level 1 headings (H2)","themeable":true,"control":"ColorPicker","order":1,"appliesTo":"level1Link","cssProperty":"color"},"level2Color":{"type":"string","default":"#0073aa","cssVar":"toc-level2-color","group":"levelStyling","label":"Level 2 Text Color","description":"Text color for level 2 headings (H3)","themeable":true,"control":"ColorPicker","order":7,"appliesTo":"level2Link","cssProperty":"color"},"level3PlusColor":{"type":"string","default":"#0073aa","cssVar":"toc-level3-plus-color","group":"levelStyling","label":"Level 3+ Text Color","description":"Text color for level 3+ headings (H4-H6)","themeable":true,"control":"ColorPicker","order":13,"appliesTo":"level3PlusLink","cssProperty":"color"},"collapseIconColor":{"type":"string","default":"#666666","cssVar":"toc-collapse-icon-color","group":"collapseIcon","label":"Collapse Icon Color","description":"Color of the collapse/expand icon","themeable":true,"control":"ColorPicker","order":1,"appliesTo":["collapseIcon","titleIconOnly"],"cssProperty":"color"},"titleFontSize":{"type":"number","default":1.25,"cssVar":"toc-title-font-size","group":"titleTypography","label":"Title Font Size","description":"Font size for the TOC title in rem","themeable":true,"control":"RangeControl","min":0.7,"max":3,"step":0.01,"unit":"rem","order":1,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"font-size"},"titleFontWeight":{"type":"string","default":"700","cssVar":"toc-title-font-weight","group":"titleTypography","label":"Title Font Weight","description":"Font weight for the TOC title","themeable":true,"control":"SelectControl","options":[{"label":"100","value":"100"},{"label":"200","value":"200"},{"label":"300","value":"300"},{"label":"400","value":"400"},{"label":"500","value":"500"},{"label":"600","value":"600"},{"label":"700","value":"700"},{"label":"800","value":"800"},{"label":"900","value":"900"},{"label":"Normal","value":"normal"},{"label":"Bold","value":"bold"}],"order":2,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"font-weight"},"titleTextTransform":{"type":"string","default":"none","cssVar":"toc-title-text-transform","group":"titleTypography","label":"Title Text Transform","description":"Text transformation for the title","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Uppercase","value":"uppercase"},{"label":"Lowercase","value":"lowercase"},{"label":"Capitalize","value":"capitalize"}],"order":3,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"text-transform"},"titleAlignment":{"type":"string","default":"left","cssVar":"toc-title-alignment","group":"titleTypography","label":"Title Alignment","description":"Text alignment for the title","themeable":true,"control":"SelectControl","options":["left","center","right"],"order":4,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"text-align"},"titlePadding":{"type":"object","default":{"top":0,"right":0,"bottom":12,"left":0},"cssVar":"toc-title-padding","group":"titleTypography","label":"Title Padding","description":"Padding around the title","themeable":true,"control":"BoxControl","order":5,"appliesTo":["titleStatic","titleCollapsible"],"cssProperty":"padding"},"level1FontSize":{"type":"number","default":1.125,"cssVar":"toc-level1-font-size","group":"levelStyling","label":"Level 1 Font Size","description":"Font size for level 1 items (H2) in rem","themeable":true,"control":"RangeControl","min":0.6,"max":2.3,"step":0.01,"unit":"rem","order":2,"appliesTo":"level1Link","cssProperty":"font-size"},"level1FontWeight":{"type":"string","default":"600","cssVar":"toc-level1-font-weight","group":"levelStyling","label":"Level 1 Font Weight","description":"Font weight for level 1 items","themeable":true,"control":"SelectControl","options":[{"label":"100","value":"100"},{"label":"200","value":"200"},{"label":"300","value":"300"},{"label":"400","value":"400"},{"label":"500","value":"500"},{"label":"600","value":"600"},{"label":"700","value":"700"},{"label":"800","value":"800"},{"label":"900","value":"900"},{"label":"Normal","value":"normal"},{"label":"Bold","value":"bold"}],"order":3,"appliesTo":"level1Link","cssProperty":"font-weight"},"level1FontStyle":{"type":"string","default":"normal","cssVar":"toc-level1-font-style","group":"levelStyling","label":"Level 1 Font Style","description":"Font style for level 1 items","themeable":true,"control":"SelectControl","options":[{"label":"Normal","value":"normal"},{"label":"Italic","value":"italic"},{"label":"Oblique","value":"oblique"}],"order":4,"appliesTo":"level1Link","cssProperty":"font-style"},"level1TextTransform":{"type":"string","default":"none","cssVar":"toc-level1-text-transform","group":"levelStyling","label":"Level 1 Text Transform","description":"Text transformation for level 1 items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Uppercase","value":"uppercase"},{"label":"Lowercase","value":"lowercase"},{"label":"Capitalize","value":"capitalize"}],"order":5,"appliesTo":"level1Link","cssProperty":"text-transform"},"level1TextDecoration":{"type":"string","default":"none","cssVar":"toc-level1-text-decoration","group":"levelStyling","label":"Level 1 Text Decoration","description":"Text decoration for level 1 items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Underline","value":"underline"},{"label":"Overline","value":"overline"},{"label":"Line Through","value":"line-through"}],"order":6,"appliesTo":"level1Link","cssProperty":"text-decoration"},"level2FontSize":{"type":"number","default":1,"cssVar":"toc-level2-font-size","group":"levelStyling","label":"Level 2 Font Size","description":"Font size for level 2 items (H3) in rem","themeable":true,"control":"RangeControl","min":0.6,"max":2,"step":0.01,"unit":"rem","order":8,"appliesTo":"level2Link","cssProperty":"font-size"},"level2FontWeight":{"type":"string","default":"normal","cssVar":"toc-level2-font-weight","group":"levelStyling","label":"Level 2 Font Weight","description":"Font weight for level 2 items","themeable":true,"control":"SelectControl","options":[{"label":"100","value":"100"},{"label":"200","value":"200"},{"label":"300","value":"300"},{"label":"400","value":"400"},{"label":"500","value":"500"},{"label":"600","value":"600"},{"label":"700","value":"700"},{"label":"800","value":"800"},{"label":"900","value":"900"},{"label":"Normal","value":"normal"},{"label":"Bold","value":"bold"}],"order":9,"appliesTo":"level2Link","cssProperty":"font-weight"},"level2FontStyle":{"type":"string","default":"normal","cssVar":"toc-level2-font-style","group":"levelStyling","label":"Level 2 Font Style","description":"Font style for level 2 items","themeable":true,"control":"SelectControl","options":[{"label":"Normal","value":"normal"},{"label":"Italic","value":"italic"},{"label":"Oblique","value":"oblique"}],"order":10,"appliesTo":"level2Link","cssProperty":"font-style"},"level2TextTransform":{"type":"string","default":"none","cssVar":"toc-level2-text-transform","group":"levelStyling","label":"Level 2 Text Transform","description":"Text transformation for level 2 items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Uppercase","value":"uppercase"},{"label":"Lowercase","value":"lowercase"},{"label":"Capitalize","value":"capitalize"}],"order":11,"appliesTo":"level2Link","cssProperty":"text-transform"},"level2TextDecoration":{"type":"string","default":"none","cssVar":"toc-level2-text-decoration","group":"levelStyling","label":"Level 2 Text Decoration","description":"Text decoration for level 2 items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Underline","value":"underline"},{"label":"Overline","value":"overline"},{"label":"Line Through","value":"line-through"}],"order":12,"appliesTo":"level2Link","cssProperty":"text-decoration"},"level3PlusFontSize":{"type":"number","default":0.875,"cssVar":"toc-level3-plus-font-size","group":"levelStyling","label":"Level 3+ Font Size","description":"Font size for level 3+ items (H4-H6) in rem","themeable":true,"control":"RangeControl","min":0.6,"max":1.8,"step":0.01,"unit":"rem","order":14,"appliesTo":"level3PlusLink","cssProperty":"font-size"},"level3PlusFontWeight":{"type":"string","default":"normal","cssVar":"toc-level3-plus-font-weight","group":"levelStyling","label":"Level 3+ Font Weight","description":"Font weight for level 3+ items","themeable":true,"control":"SelectControl","options":[{"label":"100","value":"100"},{"label":"200","value":"200"},{"label":"300","value":"300"},{"label":"400","value":"400"},{"label":"500","value":"500"},{"label":"600","value":"600"},{"label":"700","value":"700"},{"label":"800","value":"800"},{"label":"900","value":"900"},{"label":"Normal","value":"normal"},{"label":"Bold","value":"bold"}],"order":15,"appliesTo":"level3PlusLink","cssProperty":"font-weight"},"level3PlusFontStyle":{"type":"string","default":"normal","cssVar":"toc-level3-plus-font-style","group":"levelStyling","label":"Level 3+ Font Style","description":"Font style for level 3+ items","themeable":true,"control":"SelectControl","options":[{"label":"Normal","value":"normal"},{"label":"Italic","value":"italic"},{"label":"Oblique","value":"oblique"}],"order":16,"appliesTo":"level3PlusLink","cssProperty":"font-style"},"level3PlusTextTransform":{"type":"string","default":"none","cssVar":"toc-level3-plus-text-transform","group":"levelStyling","label":"Level 3+ Text Transform","description":"Text transformation for level 3+ items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Uppercase","value":"uppercase"},{"label":"Lowercase","value":"lowercase"},{"label":"Capitalize","value":"capitalize"}],"order":17,"appliesTo":"level3PlusLink","cssProperty":"text-transform"},"level3PlusTextDecoration":{"type":"string","default":"none","cssVar":"toc-level3-plus-text-decoration","group":"levelStyling","label":"Level 3+ Text Decoration","description":"Text decoration for level 3+ items","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Underline","value":"underline"},{"label":"Overline","value":"overline"},{"label":"Line Through","value":"line-through"}],"order":18,"appliesTo":"level3PlusLink","cssProperty":"text-decoration"},"blockBorderWidth":{"type":"number","default":1,"cssVar":"toc-border-width","group":"blockBorders","label":"Block Border Width","description":"Width of the wrapper border in pixels","themeable":true,"control":"RangeControl","min":0,"max":10,"unit":"px","order":3,"appliesTo":"wrapper","cssProperty":"border-width"},"blockBorderStyle":{"type":"string","default":"solid","cssVar":"toc-border-style","group":"blockBorders","label":"Block Border Style","description":"Style of the wrapper border","themeable":true,"control":"SelectControl","options":[{"label":"None","value":"none"},{"label":"Solid","value":"solid"},{"label":"Dashed","value":"dashed"},{"label":"Dotted","value":"dotted"},{"label":"Double","value":"double"},{"label":"Groove","value":"groove"},{"label":"Ridge","value":"ridge"},{"label":"Inset","value":"inset"},{"label":"Outset","value":"outset"}],"order":4,"appliesTo":"wrapper","cssProperty":"border-style"},"blockBorderRadius":{"type":"object","default":{"topLeft":4,"topRight":4,"bottomRight":4,"bottomLeft":4},"cssVar":"toc-border-radius","group":"blockBorders","label":"Block Border Radius","description":"Corner radius of the wrapper","themeable":true,"control":"BorderRadiusControl","unit":"px","order":5,"appliesTo":"wrapper","cssProperty":"border-radius"},"blockShadow":{"type":"string","default":"none","cssVar":"toc-border-shadow","group":"blockBorders","label":"Block Shadow","description":"CSS box-shadow for the wrapper","themeable":true,"control":"TextControl","order":6,"appliesTo":"wrapper","cssProperty":"box-shadow"},"blockShadowHover":{"type":"string","default":"none","cssVar":"toc-border-shadow-hover","group":"blockBorders","label":"Block Hover Shadow","description":"CSS box-shadow for the wrapper on hover","themeable":true,"control":"TextControl","state":"hover","order":7,"appliesTo":"wrapper","cssProperty":"box-shadow"},"wrapperPadding":{"type":"number","default":1.25,"cssVar":"toc-wrapper-padding","group":"spacingLayout","label":"Wrapper Padding","description":"Padding inside the TOC wrapper (rem)","themeable":true,"control":"RangeControl","min":0,"max":3.2,"step":0.01,"unit":"rem","order":1,"appliesTo":"wrapper","cssProperty":"padding"},"listPaddingLeft":{"type":"number","default":1.5,"cssVar":"toc-list-padding-left","group":"spacingLayout","label":"List Padding Left","description":"Left padding for the list (rem)","themeable":true,"control":"RangeControl","min":0,"max":3.2,"step":0.01,"unit":"rem","order":2,"appliesTo":["list","nestedList"],"cssProperty":"padding-left"},"itemSpacing":{"type":"number","default":0.5,"cssVar":"toc-item-spacing","group":"spacingLayout","label":"Item Spacing","description":"Vertical space between TOC items (rem)","themeable":true,"control":"RangeControl","min":0,"max":1.9,"step":0.01,"unit":"rem","order":3,"appliesTo":["list","nestedList"],"cssProperty":"margin-bottom"},"levelIndent":{"type":"number","default":1.25,"cssVar":"toc-level-indent","group":"spacingLayout","label":"Level Indent","description":"Indentation per heading level (rem)","themeable":true,"control":"RangeControl","min":0,"max":3.2,"step":0.01,"unit":"rem","order":4,"appliesTo":["list","nestedList"],"cssProperty":"margin-left"},"positionTop":{"type":"number","default":6.25,"cssVar":"toc-position-top","group":"spacingLayout","label":"Position Top","description":"Top offset for sticky/fixed positioning (rem)","themeable":true,"control":"RangeControl","min":0,"max":18.8,"step":0.01,"unit":"rem","order":5,"showWhen":{"positionType":["sticky","fixed"]},"appliesTo":"wrapper","cssProperty":"top"},"zIndex":{"type":"number","default":100,"cssVar":"toc-z-index","group":"spacingLayout","label":"Z-Index","description":"Stack order for positioned TOC","themeable":true,"control":"RangeControl","min":1,"max":9999,"order":6,"showWhen":{"positionType":["sticky","fixed"]},"appliesTo":"wrapper","cssProperty":"z-index"},"positionHorizontalSide":{"type":"string","default":"right","group":"spacingLayout","label":"Horizontal Side","description":"Which side to anchor the TOC (sticky/fixed positioning)","themeable":false,"reason":"Applied as inline style, not CSS variable","control":"SelectControl","options":[{"label":"Left","value":"left"},{"label":"Right","value":"right"}],"order":7,"showWhen":{"positionType":["sticky","fixed"]}},"positionHorizontalOffset":{"type":"string","default":"1.25rem","group":"spacingLayout","label":"Horizontal Offset","description":"Distance from the selected side","themeable":false,"reason":"Applied as inline style, not CSS variable","control":"UnitControl","units":["rem","px","%"],"order":8,"showWhen":{"positionType":["sticky","fixed"]}},"collapseIconSize":{"type":"number","default":1.25,"cssVar":"toc-collapse-icon-size","group":"collapseIcon","label":"Collapse Icon Size","description":"Size of the collapse/expand icon (rem)","themeable":true,"control":"RangeControl","min":0.7,"max":2.3,"step":0.01,"unit":"rem","order":2,"appliesTo":["collapseIcon","titleIconOnly"],"cssProperty":"font-size"}}}'),g={tocId:{type:"string",default:""},showTitle:{type:"boolean",default:!0},titleText:{type:"string",default:"Table of Contents"},currentTheme:{type:"string",default:""},tocItems:{type:"array",default:[]},deletedHeadingIds:{type:"array",default:[]},filterMode:{type:"string",default:"include-all"},includeLevels:{type:"array",default:[2,3,4,5,6]},includeClasses:{type:"string",default:""},excludeLevels:{type:"array",default:[]},excludeClasses:{type:"string",default:""},depthLimit:{type:"number",default:null},includeAccordions:{type:"boolean",default:!0},includeTabs:{type:"boolean",default:!0},numberingStyle:{type:"string",default:"none"},isCollapsible:{type:"boolean",default:!1},initiallyCollapsed:{type:"boolean",default:!1},positionType:{type:"string",default:"default"},smoothScroll:{type:"boolean",default:!0},scrollOffset:{type:"number",default:0},autoHighlight:{type:"boolean",default:!0},clickBehavior:{type:"string",default:"navigate"},tocWidth:{type:"string",default:"100%"},tocHorizontalAlign:{type:"string",default:"center"},wrapperBackgroundColor:{type:"string",default:"#ffffff"},blockBorderColor:{type:"string",default:"#dddddd"},titleColor:{type:"string",default:"#333333"},titleBackgroundColor:{type:"string",default:"transparent"},linkColor:{type:"string",default:"#0073aa"},linkHoverColor:{type:"string",default:"#005177"},linkActiveColor:{type:"string",default:"#005177"},linkVisitedColor:{type:"string",default:"#0073aa"},numberingColor:{type:"string",default:"#0073aa"},level1Color:{type:"string",default:"#0073aa"},level2Color:{type:"string",default:"#0073aa"},level3PlusColor:{type:"string",default:"#0073aa"},collapseIconColor:{type:"string",default:"#666666"},titleFontSize:{type:"number",default:1.25},titleFontWeight:{type:"string",default:"700"},titleTextTransform:{type:"string",default:"none"},titleAlignment:{type:"string",default:"left"},titlePadding:{type:"object",default:{top:0,right:0,bottom:12,left:0}},level1FontSize:{type:"number",default:1.125},level1FontWeight:{type:"string",default:"600"},level1FontStyle:{type:"string",default:"normal"},level1TextTransform:{type:"string",default:"none"},level1TextDecoration:{type:"string",default:"none"},level2FontSize:{type:"number",default:1},level2FontWeight:{type:"string",default:"normal"},level2FontStyle:{type:"string",default:"normal"},level2TextTransform:{type:"string",default:"none"},level2TextDecoration:{type:"string",default:"none"},level3PlusFontSize:{type:"number",default:.875},level3PlusFontWeight:{type:"string",default:"normal"},level3PlusFontStyle:{type:"string",default:"normal"},level3PlusTextTransform:{type:"string",default:"none"},level3PlusTextDecoration:{type:"string",default:"none"},blockBorderWidth:{type:"number",default:1},blockBorderStyle:{type:"string",default:"solid"},blockBorderRadius:{type:"object",default:{topLeft:4,topRight:4,bottomRight:4,bottomLeft:4}},blockShadow:{type:"string",default:"none"},blockShadowHover:{type:"string",default:"none"},wrapperPadding:{type:"number",default:1.25},listPaddingLeft:{type:"number",default:1.5},itemSpacing:{type:"number",default:.5},levelIndent:{type:"number",default:1.25},positionTop:{type:"number",default:6.25},zIndex:{type:"number",default:100},positionHorizontalSide:{type:"string",default:"right"},positionHorizontalOffset:{type:"string",default:"1.25rem"},collapseIconSize:{type:"number",default:1.25}};function m(e,t){const{filterMode:l,includeLevels:o,includeClasses:n,excludeLevels:r,excludeClasses:s,depthLimit:a}=t;let i=e;if("include-only"===l?i=i.filter(e=>!!o.includes(e.level)||!!n&&n.split(",").map(e=>e.trim()).some(t=>e.classes.includes(t))):"exclude"===l&&(i=i.filter(e=>!r.includes(e.level)&&(!s||!s.split(",").map(e=>e.trim()).some(t=>e.classes.includes(t))))),a&&a>0){const e=Math.min(...i.map(e=>e.level));i=i.filter(t=>t.level-e<a)}return i}const b=(e={})=>e.anchor||e.id||"";function h(e={},t="",l=0){return e.id?e.id:e.anchor?e.anchor:`${t||"toc"}-${function(e=""){return e.toString().trim().toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}(e.text||`heading-${l+1}`)||`heading-${l+1}`}${e.sourceClientId?`-${e.sourceClientId}`:`-${l+1}`}`}const y={accordion:{titleColor:{cssVar:"--accordion-title-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},titleBackgroundColor:{cssVar:"--accordion-title-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},hoverTitleColor:{cssVar:"--accordion-title-hover-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},hoverTitleBackgroundColor:{cssVar:"--accordion-title-hover-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},contentBackgroundColor:{cssVar:"--accordion-content-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},borderColor:{cssVar:"--accordion-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},dividerColor:{cssVar:"--accordion-divider-color",unit:null,type:"string",cssProperty:"border-top-color",dependsOn:null,variants:null},iconColor:{cssVar:"--accordion-icon-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},titleFontSize:{cssVar:"--accordion-title-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},titleFontWeight:{cssVar:"--accordion-title-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},titleFontStyle:{cssVar:"--accordion-title-font-style",unit:null,type:"string",cssProperty:"font-style",dependsOn:null,variants:null},titleTextTransform:{cssVar:"--accordion-title-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},titleTextDecoration:{cssVar:"--accordion-title-text-decoration",unit:null,type:"string",cssProperty:"text-decoration",dependsOn:null,variants:null},titleAlignment:{cssVar:"--accordion-title-alignment",unit:null,type:"string",cssProperty:"text-align",dependsOn:null,variants:null},borderWidth:{cssVar:"--accordion-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},borderStyle:{cssVar:"--accordion-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},borderRadius:{cssVar:"--accordion-border-radius",unit:"px",type:"object",cssProperty:"border-radius",dependsOn:null,variants:null},shadow:{cssVar:"--accordion-border-shadow",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},shadowHover:{cssVar:"--accordion-border-shadow-hover",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},dividerWidth:{cssVar:"--accordion-divider-width",unit:"px",type:"number",cssProperty:"border-top-width",dependsOn:null,variants:null},dividerStyle:{cssVar:"--accordion-divider-style",unit:null,type:"string",cssProperty:"border-top-style",dependsOn:null,variants:null},iconSize:{cssVar:"--accordion-icon-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},iconRotation:{cssVar:"--accordion-icon-rotation",unit:"deg",type:"number",cssProperty:"transform",dependsOn:null,variants:null}},tabs:{iconColor:{cssVar:"--tabs-icon-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},iconSize:{cssVar:"--tabs-icon-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},iconRotation:{cssVar:"--tabs-icon-rotation-base",unit:"deg",type:"number",cssProperty:"transform",dependsOn:null,variants:null},iconRotationActive:{cssVar:"--tabs-icon-rotation-active",unit:"deg",type:"number",cssProperty:"transform",dependsOn:null,variants:null},tabButtonColor:{cssVar:"--tabs-button-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},tabButtonBackgroundColor:{cssVar:"--tabs-button-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},tabButtonHoverColor:{cssVar:"--tabs-button-hover-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},tabButtonHoverBackgroundColor:{cssVar:"--tabs-button-hover-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},tabButtonActiveColor:{cssVar:"--tabs-button-active-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},tabButtonActiveBackgroundColor:{cssVar:"--tabs-button-active-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},tabButtonActiveContentBorderWidth:{cssVar:"--tabs-button-active-content-border-width",unit:"px",type:"number",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-width"},"vertical-left":{cssProperty:"border-right-width"},"vertical-right":{cssProperty:"border-left-width"},_default:{cssProperty:"border-bottom-width"}}},tabButtonActiveContentBorderStyle:{cssVar:"--tabs-button-active-content-border-style",unit:null,type:"string",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-style"},"vertical-left":{cssProperty:"border-right-style"},"vertical-right":{cssProperty:"border-left-style"},_default:{cssProperty:"border-bottom-style"}}},tabButtonActiveFontWeight:{cssVar:"--tabs-button-active-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},tabButtonBorderColor:{cssVar:"--tabs-button-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},tabButtonActiveBorderColor:{cssVar:"--tabs-button-active-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},tabButtonActiveContentBorderColor:{cssVar:"--tabs-button-active-content-border-color",unit:null,type:"string",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-color"},"vertical-left":{cssProperty:"border-right-color"},"vertical-right":{cssProperty:"border-left-color"},_default:{cssProperty:"border-bottom-color"}}},tabButtonBorderWidth:{cssVar:"--tabs-button-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},tabButtonBorderStyle:{cssVar:"--tabs-button-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},tabButtonBorderRadius:{cssVar:"--tabs-button-border-radius",unit:"px",type:"object",cssProperty:"border-radius",dependsOn:null,variants:null},tabButtonShadow:{cssVar:"--tabs-button-border-shadow",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},tabButtonShadowHover:{cssVar:"--tabs-button-border-shadow-hover",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},tabButtonFontSize:{cssVar:"--tabs-button-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},tabButtonFontWeight:{cssVar:"--tabs-button-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},tabButtonFontStyle:{cssVar:"--tabs-button-font-style",unit:null,type:"string",cssProperty:"font-style",dependsOn:null,variants:null},tabButtonTextTransform:{cssVar:"--tabs-button-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},tabButtonTextDecoration:{cssVar:"--tabs-button-text-decoration",unit:null,type:"string",cssProperty:"text-decoration",dependsOn:null,variants:null},tabButtonTextAlign:{cssVar:"--tabs-button-text-align",unit:null,type:"string",cssProperty:"text-align",dependsOn:null,variants:null},tabButtonPadding:{cssVar:"--tabs-button-padding",unit:"rem",type:"number",cssProperty:"padding",dependsOn:null,variants:null},tabListBackgroundColor:{cssVar:"--tabs-list-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},tabsRowBorderColor:{cssVar:"--tabs-row-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},tabsRowBorderWidth:{cssVar:"--tabs-row-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},tabsRowBorderStyle:{cssVar:"--tabs-row-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},tabListAlignment:{cssVar:"--tabs-list-align",unit:null,type:"string",cssProperty:"justify-content",dependsOn:null,variants:null},tabsRowSpacing:{cssVar:"--tabs-row-spacing",unit:"rem",type:"number",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"padding-top"},"vertical-left":{cssProperty:"padding-left"},"vertical-right":{cssProperty:"padding-right"},_default:{cssProperty:"padding-top"}}},tabsButtonGap:{cssVar:"--tabs-button-gap",unit:"rem",type:"number",cssProperty:"gap",dependsOn:null,variants:null},panelBackgroundColor:{cssVar:"--tabs-panel-bg",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},panelBorderColor:{cssVar:"--tabs-panel-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},panelBorderWidth:{cssVar:"--tabs-panel-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},panelBorderStyle:{cssVar:"--tabs-panel-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},panelBorderRadius:{cssVar:"--tabs-panel-border-radius",unit:"px",type:"object",cssProperty:"border-radius",dependsOn:null,variants:null},borderColor:{cssVar:"--tabs-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},borderWidth:{cssVar:"--tabs-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},borderStyle:{cssVar:"--tabs-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},borderRadius:{cssVar:"--tabs-border-radius",unit:"px",type:"object",cssProperty:"border-radius",dependsOn:null,variants:null},shadow:{cssVar:"--tabs-border-shadow",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},shadowHover:{cssVar:"--tabs-border-shadow-hover",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},tabsListContentBorderColor:{cssVar:"--tabs-list-divider-border-color",unit:null,type:"string",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-color"},"vertical-left":{cssProperty:"border-right-color"},"vertical-right":{cssProperty:"border-left-color"},_default:{cssProperty:"border-bottom-color"}}},tabsListContentBorderWidth:{cssVar:"--tabs-list-divider-border-width",unit:"px",type:"number",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-width"},"vertical-left":{cssProperty:"border-right-width"},"vertical-right":{cssProperty:"border-left-width"},_default:{cssProperty:"border-bottom-width"}}},tabsListContentBorderStyle:{cssVar:"--tabs-list-divider-border-style",unit:null,type:"string",cssProperty:null,dependsOn:"orientation",variants:{horizontal:{cssProperty:"border-bottom-style"},"vertical-left":{cssProperty:"border-right-style"},"vertical-right":{cssProperty:"border-left-style"},_default:{cssProperty:"border-bottom-style"}}}},toc:{wrapperBackgroundColor:{cssVar:"--toc-wrapper-background-color",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},blockBorderColor:{cssVar:"--toc-border-color",unit:null,type:"string",cssProperty:"border-color",dependsOn:null,variants:null},titleColor:{cssVar:"--toc-title-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},titleBackgroundColor:{cssVar:"--toc-title-background-color",unit:null,type:"string",cssProperty:"background-color",dependsOn:null,variants:null},linkColor:{cssVar:"--toc-link-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},linkHoverColor:{cssVar:"--toc-link-hover-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},linkActiveColor:{cssVar:"--toc-link-active-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},linkVisitedColor:{cssVar:"--toc-link-visited-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},numberingColor:{cssVar:"--toc-numbering-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},level1Color:{cssVar:"--toc-level1-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},level2Color:{cssVar:"--toc-level2-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},level3PlusColor:{cssVar:"--toc-level3-plus-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},collapseIconColor:{cssVar:"--toc-collapse-icon-color",unit:null,type:"string",cssProperty:"color",dependsOn:null,variants:null},titleFontSize:{cssVar:"--toc-title-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},titleFontWeight:{cssVar:"--toc-title-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},titleTextTransform:{cssVar:"--toc-title-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},titleAlignment:{cssVar:"--toc-title-alignment",unit:null,type:"string",cssProperty:"text-align",dependsOn:null,variants:null},titlePadding:{cssVar:"--toc-title-padding",unit:null,type:"object",cssProperty:"padding",dependsOn:null,variants:null},level1FontSize:{cssVar:"--toc-level1-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},level1FontWeight:{cssVar:"--toc-level1-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},level1FontStyle:{cssVar:"--toc-level1-font-style",unit:null,type:"string",cssProperty:"font-style",dependsOn:null,variants:null},level1TextTransform:{cssVar:"--toc-level1-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},level1TextDecoration:{cssVar:"--toc-level1-text-decoration",unit:null,type:"string",cssProperty:"text-decoration",dependsOn:null,variants:null},level2FontSize:{cssVar:"--toc-level2-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},level2FontWeight:{cssVar:"--toc-level2-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},level2FontStyle:{cssVar:"--toc-level2-font-style",unit:null,type:"string",cssProperty:"font-style",dependsOn:null,variants:null},level2TextTransform:{cssVar:"--toc-level2-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},level2TextDecoration:{cssVar:"--toc-level2-text-decoration",unit:null,type:"string",cssProperty:"text-decoration",dependsOn:null,variants:null},level3PlusFontSize:{cssVar:"--toc-level3-plus-font-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null},level3PlusFontWeight:{cssVar:"--toc-level3-plus-font-weight",unit:null,type:"string",cssProperty:"font-weight",dependsOn:null,variants:null},level3PlusFontStyle:{cssVar:"--toc-level3-plus-font-style",unit:null,type:"string",cssProperty:"font-style",dependsOn:null,variants:null},level3PlusTextTransform:{cssVar:"--toc-level3-plus-text-transform",unit:null,type:"string",cssProperty:"text-transform",dependsOn:null,variants:null},level3PlusTextDecoration:{cssVar:"--toc-level3-plus-text-decoration",unit:null,type:"string",cssProperty:"text-decoration",dependsOn:null,variants:null},blockBorderWidth:{cssVar:"--toc-border-width",unit:"px",type:"number",cssProperty:"border-width",dependsOn:null,variants:null},blockBorderStyle:{cssVar:"--toc-border-style",unit:null,type:"string",cssProperty:"border-style",dependsOn:null,variants:null},blockBorderRadius:{cssVar:"--toc-border-radius",unit:"px",type:"object",cssProperty:"border-radius",dependsOn:null,variants:null},blockShadow:{cssVar:"--toc-border-shadow",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},blockShadowHover:{cssVar:"--toc-border-shadow-hover",unit:null,type:"string",cssProperty:"box-shadow",dependsOn:null,variants:null},wrapperPadding:{cssVar:"--toc-wrapper-padding",unit:"rem",type:"number",cssProperty:"padding",dependsOn:null,variants:null},listPaddingLeft:{cssVar:"--toc-list-padding-left",unit:"rem",type:"number",cssProperty:"padding-left",dependsOn:null,variants:null},itemSpacing:{cssVar:"--toc-item-spacing",unit:"rem",type:"number",cssProperty:"margin-bottom",dependsOn:null,variants:null},levelIndent:{cssVar:"--toc-level-indent",unit:"rem",type:"number",cssProperty:"margin-left",dependsOn:null,variants:null},positionTop:{cssVar:"--toc-position-top",unit:"rem",type:"number",cssProperty:"top",dependsOn:null,variants:null},zIndex:{cssVar:"--toc-z-index",unit:null,type:"number",cssProperty:"z-index",dependsOn:null,variants:null},collapseIconSize:{cssVar:"--toc-collapse-icon-size",unit:"rem",type:"number",cssProperty:"font-size",dependsOn:null,variants:null}}};function f(e,t,l){const o=y[l]?.[e];return o?null==t?null:"object"===o.type&&"object"==typeof t?e.toLowerCase().includes("radius")?`${t.topLeft}px ${t.topRight}px ${t.bottomRight}px ${t.bottomLeft}px`:e.toLowerCase().includes("padding")?`${t.top}px ${t.right}px ${t.bottom}px ${t.left}px`:JSON.stringify(t):o.unit&&"number"==typeof t?`${t}${o.unit}`:t:null}l(810),(0,o.registerBlockType)(n.name,{...n,attributes:g,edit:function({attributes:e,setAttributes:t,clientId:l}){var o;(0,d.Yz)("[DEBUG] TOC Edit mounted with attributes:",e);const{tocId:n,showTitle:y,titleText:f,tocItems:v=[],deletedHeadingIds:T=[]}=e,[C,E]=(0,s.useState)([]),[k,x]=(0,s.useState)(!1),[S,O]=(0,s.useState)(!1),P=n||l||"toc",w=(0,d.Gd)(e.tocHorizontalAlign),z=(0,u.useSelect)(e=>e(a.store).getBlocks(),[]);(0,s.useEffect)(()=>{n||t({tocId:(0,d.Ij)()})},[n,t]),(0,s.useEffect)(()=>{v.length>0&&!S&&O(!0)},[v,S]);const B=e=>e?e.replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim():"",L=(0,s.useCallback)((e,t,l={})=>{const{includeAccordions:o=!0,includeTabs:n=!0}=l,r=[],s=e=>{if(e.clientId!==t&&"custom/toc"!==e.name){if("core/heading"===e.name){const t=e.attributes.level||2,l=e.attributes.content||"",o=B(l);o&&r.push({level:t,text:o,id:e.attributes.anchor||"",classes:[],blockType:"heading",sourceClientId:e.clientId})}if(o&&"custom/accordion"===e.name){const t=e.attributes.headingLevel;if(t&&"none"!==t){const l=parseInt(t.charAt(1),10),o=e.attributes.title||"",n=B(o);n&&r.push({level:l,text:n,id:e.attributes.accordionId||"",classes:["accordion-heading"],blockType:"accordion",sourceClientId:e.clientId})}}if(n&&"custom/tabs"===e.name){const t=e.attributes.headingLevel;if(t&&"none"!==t){const l=parseInt(t.charAt(1),10);(e.attributes.tabsData||[]).forEach(t=>{const o=B(t.title);o&&r.push({level:l,text:o,id:t.tabId||"",classes:["tab-heading"],blockType:"tabs",sourceClientId:e.clientId})})}}e.innerBlocks&&e.innerBlocks.length>0&&e.innerBlocks.forEach(s)}};return e.forEach(s),r},[]),V=(0,s.useCallback)(e=>{if(!e)return;const l=v.filter(t=>b(t)!==e),o=Array.from(new Set([...T,e]));t({tocItems:l,deletedHeadingIds:o})},[v,T,t]),A=(0,s.useCallback)(()=>{t({deletedHeadingIds:[]})},[t]),R=(0,s.useCallback)(e=>{if(e<=0||0===v.length)return;const l=[...v],o=l[e-1];l[e-1]=l[e],l[e]=o,t({tocItems:l})},[v,t]),I=(0,s.useCallback)(e=>{if(e>=v.length-1||0===v.length)return;const l=[...v],o=l[e+1];l[e+1]=l[e],l[e]=o,t({tocItems:l})},[v,t]),N=(0,s.useCallback)(e=>{if(!e)return;const l=v.map(t=>b(t)===e?{...t,hidden:!t.hidden}:t);t({tocItems:l})},[v,t]),D=(0,s.useCallback)((e,l)=>{if(!e)return;const o=v.map(t=>b(t)===e?{...t,text:l}:t);t({tocItems:o})},[v,t]),H=(0,s.useMemo)(()=>{const e={};return Object.keys(g).forEach(t=>{void 0!==g[t].default&&(e[t]=g[t].default)}),e},[]),F=(0,s.useMemo)(()=>(0,d.O_)(H),[H]),{themes:$,themesLoaded:_,currentTheme:U,expectedValues:M,isCustomized:j,sessionCache:W,handlers:{handleSaveNewTheme:q,handleUpdateTheme:G,handleDeleteTheme:Y,handleRenameTheme:J,handleResetCustomizations:X,handleThemeChange:Z}}=(0,d.W4)({blockType:"toc",schema:p,attributes:e,setAttributes:t,allDefaults:F}),K=e;(0,d.Yz)("[DEBUG] TOC effective values:",K),(0,d.Yz)("[DEBUG] TOC expected values:",M),(0,d.Yz)("[DEBUG] TOC isCustomized:",j);const Q=(()=>{var e,t,l,o;const n=K.titlePadding||{top:0,right:0,bottom:12,left:0},r=K.blockBorderRadius||{topLeft:4,topRight:4,bottomRight:4,bottomLeft:4};return{container:{backgroundColor:K.wrapperBackgroundColor||"#ffffff",borderColor:K.blockBorderColor||"#dddddd",borderWidth:`${null!==(e=K.blockBorderWidth)&&void 0!==e?e:1}px`,borderStyle:K.blockBorderStyle||"solid",borderRadius:`${r.topLeft}px ${r.topRight}px ${r.bottomRight}px ${r.bottomLeft}px`,boxShadow:K.blockShadow||"none",padding:`${null!==(t=K.wrapperPadding)&&void 0!==t?t:1.25}rem`,top:`${null!==(l=K.positionTop)&&void 0!==l?l:6.25}rem`},title:{color:K.titleColor||"#333333",backgroundColor:K.titleBackgroundColor||"transparent",fontSize:`${null!==(o=K.titleFontSize)&&void 0!==o?o:1.25}rem`,fontWeight:K.titleFontWeight||"700",textTransform:K.titleTextTransform||"none",textAlign:K.titleAlignment||"left",padding:`${n.top}px ${n.right}px ${n.bottom}px ${n.left}px`}}})(),ee=m(C,e),te=(v||[]).map((e,t)=>({id:b(e)||`heading-${t}`,anchor:b(e),text:e.text||"",level:e.level||2})),le=te.length>0?te:ee,{top:oe,...ne}=Q.container,re={width:K.tocWidth,...ne},se=(0,a.useBlockProps)({className:"gutplus-toc",style:re,ref:w});return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.InspectorControls,null,(0,r.createElement)("div",{className:"toc-settings-panel"},(0,r.createElement)(d.jQ,{blockType:"toc",currentTheme:U,setAttributes:t,attributes:e,themes:$,themesLoaded:_,isCustomized:j,effectiveValues:K,sessionCache:W,onThemeChange:Z,onSaveNew:q,onUpdate:G,onDelete:Y,onRename:J,onReset:X})),(0,r.createElement)(i.PanelBody,{title:"TOC Settings",initialOpen:!0},(0,r.createElement)(i.ToggleControl,{label:"Show Title",checked:y,onChange:e=>t({showTitle:e})}),y&&(0,r.createElement)(i.TextControl,{label:"Title Text",value:f,onChange:e=>t({titleText:e}),__nextHasNoMarginBottom:!0}),(0,r.createElement)(i.ToggleControl,{label:"Collapsible",checked:e.isCollapsible,onChange:e=>t({isCollapsible:e})}),e.isCollapsible&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.ToggleControl,{label:"Initially Collapsed",checked:e.initiallyCollapsed,onChange:e=>t({initiallyCollapsed:e})}),(0,r.createElement)(i.SelectControl,{label:"Click Behavior",value:e.clickBehavior||"navigate",options:[{label:"Navigate to section",value:"navigate"},{label:"Navigate and collapse TOC",value:"navigate-and-collapse"}],onChange:e=>t({clickBehavior:e}),__next40pxDefaultSize:!0}))),(0,r.createElement)(i.PanelBody,{title:"Heading Filter",initialOpen:!1},(0,r.createElement)("p",{className:"toc-filter-description"},(0,r.createElement)("strong",null,"Block Headings:")," Include headings from accordion and tab blocks when they have a heading level set."),(0,r.createElement)(i.ToggleControl,{label:"Include Accordion Headings",help:"Include headings from accordion blocks",checked:!1!==e.includeAccordions,onChange:e=>t({includeAccordions:e})}),(0,r.createElement)(i.ToggleControl,{label:"Include Tab Headings",help:"Include headings from tab blocks",checked:!1!==e.includeTabs,onChange:e=>t({includeTabs:e})}),(0,r.createElement)("hr",{className:"toc-settings-divider"}),(0,r.createElement)(i.SelectControl,{label:"Filter Mode",value:e.filterMode,options:[{label:"Include All Headings",value:"include-all"},{label:"Include Only Selected",value:"include-only"},{label:"Exclude Selected",value:"exclude"}],onChange:e=>t({filterMode:e}),__next40pxDefaultSize:!0}),"include-only"===e.filterMode&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",null,(0,r.createElement)("strong",null,"Include Levels:")),[2,3,4,5,6].map(l=>(0,r.createElement)(i.CheckboxControl,{key:l,label:`H${l}`,checked:e.includeLevels.includes(l),onChange:o=>{const n=o?[...e.includeLevels,l]:e.includeLevels.filter(e=>e!==l);t({includeLevels:n})},__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.TextControl,{label:"Include Classes (comma-separated)",value:e.includeClasses,onChange:e=>t({includeClasses:e}),__nextHasNoMarginBottom:!0})),"exclude"===e.filterMode&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",null,(0,r.createElement)("strong",null,"Exclude Levels:")),[2,3,4,5,6].map(l=>(0,r.createElement)(i.CheckboxControl,{key:l,label:`H${l}`,checked:e.excludeLevels.includes(l),onChange:o=>{const n=o?[...e.excludeLevels,l]:e.excludeLevels.filter(e=>e!==l);t({excludeLevels:n})},__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.TextControl,{label:"Exclude Classes (comma-separated)",value:e.excludeClasses,onChange:e=>t({excludeClasses:e}),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.RangeControl,{label:"Depth Limit (0 = no limit)",value:e.depthLimit||0,onChange:e=>t({depthLimit:0===e?null:e}),min:0,max:6})),(0,r.createElement)(i.PanelBody,{title:"Numbering",initialOpen:!1},(0,r.createElement)(i.SelectControl,{label:"Numbering Style",value:e.numberingStyle,options:[{label:"None",value:"none"},{label:"Decimal (1, 1.1, 1.1.1)",value:"decimal"},{label:"Decimal Leading Zero",value:"decimal-leading-zero"},{label:"Roman Numerals",value:"roman"},{label:"Letters (A, B, C)",value:"alpha"}],onChange:e=>t({numberingStyle:e}),__next40pxDefaultSize:!0})),(0,r.createElement)(d.hK,{schema:p,attributes:e,setAttributes:t,effectiveValues:K,theme:$[e.currentTheme]?.values,cssDefaults:F}),j&&(0,r.createElement)("div",{className:"customization-warning-wrapper"},(0,r.createElement)(d.iz,{currentTheme:U,themes:$}))),(0,r.createElement)("div",{...se},y&&(0,r.createElement)("div",{className:"toc-title",style:{fontSize:`${null!==(o=K.titleFontSize)&&void 0!==o?o:1.25}rem`,fontWeight:K.titleFontWeight,color:K.titleColor,textAlign:K.titleAlignment}},f),(0,r.createElement)("div",{className:"toc-scan-container"},(0,r.createElement)(i.Button,{variant:"secondary",onClick:()=>{x(!0),setTimeout(()=>{const o=m(L(z,l,{includeAccordions:!1!==e.includeAccordions,includeTabs:!1!==e.includeTabs}),e);E(o);const n=function(e,t,l,o){const n=new Set(l),r=new Map;e.forEach((e,t)=>{const l=h(e,o,t);l&&!n.has(l)&&r.set(l,function(e,t,l=0){const o=h(e,t,l);return{anchor:o,id:o,text:e.text||"",level:e.level||2,sourceClientId:e.sourceClientId||null}}(e,o,t))});const s=[];return t.forEach(e=>{const t=b(e);t&&!n.has(t)&&(r.has(t)?(s.push({...e,...r.get(t)}),r.delete(t)):s.push({...e,anchor:t,id:t}))}),r.forEach(e=>{s.push(e)}),s}(o,v,T,P);t({tocItems:n}),x(!1),O(!0)},200)},isBusy:k,disabled:k},k?(0,c.__)("Scanning…","guttemberg-plus"):(0,c.__)("Scan for headings","guttemberg-plus")),T.length>0&&(0,r.createElement)(i.Button,{variant:"tertiary",onClick:A,className:"toc-reset-deleted"},(0,c.__)("Reset deleted headings","guttemberg-plus"))),S||0!==le.length?0===le.length?(0,r.createElement)("p",{className:"toc-empty-message"},(0,c.__)("No headings found. Add H2-H6 headings to your content to populate the table of contents.","guttemberg-plus")):(0,r.createElement)("div",{className:"toc-curated-wrapper"},(0,r.createElement)("div",{className:"toc-items-editor"},v.map((e,t)=>{const l=b(e),o=!0===e.hidden;return(0,r.createElement)("div",{key:l||t,className:"toc-item-row"+(o?" toc-item-hidden":"")},(0,r.createElement)(a.RichText,{tagName:"span",className:"toc-link",value:e.text,onChange:e=>D(l,e),placeholder:(0,c.__)("TOC item…","guttemberg-plus"),allowedFormats:[]}),(0,r.createElement)("div",{className:"toc-item-actions"},(0,r.createElement)("button",{onClick:()=>R(t),className:"toc-action-button toc-move-button",title:(0,c.__)("Move up","guttemberg-plus"),type:"button",disabled:0===t},"↑"),(0,r.createElement)("button",{onClick:()=>I(t),className:"toc-action-button toc-move-button",title:(0,c.__)("Move down","guttemberg-plus"),type:"button",disabled:t===v.length-1},"↓"),(0,r.createElement)("button",{onClick:()=>N(l),className:"toc-action-button toc-hide-button"+(o?" is-hidden":""),title:o?(0,c.__)("Enable","guttemberg-plus"):(0,c.__)("Disable","guttemberg-plus"),type:"button"},o?"◉":"◯"),(0,r.createElement)("button",{onClick:()=>V(l),className:"toc-action-button toc-delete-button",title:(0,c.__)("Delete item","guttemberg-plus"),type:"button"},"×")))}))):(0,r.createElement)("p",{className:"toc-empty-message"},(0,c.__)('Click "Scan for headings" to detect headings in your content.',"guttemberg-plus"))))},save:function({attributes:e}){var t,l,o;const{tocId:n,showTitle:s,titleText:i,isCollapsible:c,initiallyCollapsed:u,filterMode:p,includeLevels:m,includeClasses:b,excludeLevels:h,excludeClasses:v,depthLimit:T,includeAccordions:C,includeTabs:E,tocItems:k,deletedHeadingIds:x,numberingStyle:S,smoothScroll:O,scrollOffset:P,autoHighlight:w,positionType:z,positionHorizontalSide:B,positionHorizontalOffset:L,clickBehavior:V}=e,A={};Object.keys(g).forEach(e=>{void 0!==g[e].default&&(A[e]=g[e].default)});const R=(0,d.O_)(A),I=(0,d.lS)(e,{},R,"toc"),N={"data-toc-id":n,"data-filter-mode":p,"data-include-levels":m.join(","),"data-include-classes":b,"data-exclude-levels":h.join(","),"data-exclude-classes":v,"data-depth-limit":T||0,"data-include-accordions":!1!==C,"data-include-tabs":!1!==E,"data-numbering-style":S,"data-smooth-scroll":O,"data-scroll-offset":P,"data-auto-highlight":w,"data-collapsible":c,"data-initially-collapsed":u,"data-position-type":z,"data-position-horizontal-side":B,"data-click-behavior":V||"navigate","data-toc-items":encodeURIComponent(JSON.stringify(k||[])),"data-deleted-heading-ids":(x||[]).join(",")},D=["gutplus-toc",`toc-position-${z}`];if(e.currentTheme){const t=e.currentTheme.replace(/[^a-zA-Z0-9\-]/g,"");D.push(`gutplus-toc-theme-${t}`)}const H=(0,d.sP)(e.tocHorizontalAlign);D.push(H);const F=(()=>{const t={},l=e.customizations||{};return Object.entries(l).forEach(([e,l])=>{if(null==l)return;const o=function(e){return y.toc?.[e]?.cssVar||null}(e);if(!o)return;const n=f(e,l,"toc");null!==n&&(t[o]=n)}),t})();if("fixed"===z){const e=L||"1.25rem";"left"===(B||"right")?(F.left=e,F.right="auto"):(F.right=e,F.left="auto")}const $=a.useBlockProps.save({className:D.join(" "),...Object.keys(F).length>0&&{style:F},...N}),_=`toc-toggle-${n}`,U=`toc-content-${n}`,M=I.titlePadding||{top:0,right:0,bottom:12,left:0},j=null!==(t=I.titleFontSize)&&void 0!==t?t:1.25,W=null!==(l=I.collapseIconSize)&&void 0!==l?l:1.25;return(0,r.createElement)("div",{...$},s&&!c&&(0,r.createElement)("div",{className:"toc-title",style:{fontSize:`${j}rem`,fontWeight:I.titleFontWeight||"700",color:I.titleColor||"#333333",backgroundColor:I.titleBackgroundColor||"transparent",textAlign:I.titleAlignment||"left",padding:`${M.top}px ${M.right}px ${M.bottom}px ${M.left}px`}},i),s&&c&&(0,r.createElement)("button",{id:_,className:"toc-title toc-toggle-button","aria-expanded":!u,"aria-controls":U,type:"button",style:{fontSize:`${j}rem`,fontWeight:I.titleFontWeight||"700",color:I.titleColor||"#333333",backgroundColor:I.titleBackgroundColor||"transparent",textAlign:I.titleAlignment||"left",padding:`${M.top}px ${M.right}px ${M.bottom}px ${M.left}px`,border:"none",width:"100%",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"}},(0,r.createElement)("span",null,i),(0,r.createElement)("span",{className:"toc-collapse-icon","aria-hidden":"true",style:{fontSize:`${W}rem`,color:I.collapseIconColor||"#666666"}},"▾")),!s&&c&&(0,r.createElement)("button",{id:_,className:"toc-toggle-button toc-icon-only","aria-expanded":!u,"aria-controls":U,"aria-label":"Toggle Table of Contents",type:"button",style:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",cursor:"pointer",fontSize:`${W}rem`,color:I.collapseIconColor||"#666666"}},"▾"),(0,r.createElement)("nav",{id:U,className:"toc-content","aria-label":i||"Table of Contents",style:{display:c&&u?"none":"block"}},(0,r.createElement)("ul",{className:`toc-list numbering-${S}`,style:{listStyleType:"none"===S?"disc":"none",paddingLeft:f("listPaddingLeft",null!==(o=I.listPaddingLeft)&&void 0!==o?o:R.listPaddingLeft,"toc"),margin:0}},(0,r.createElement)("li",{className:"toc-placeholder"},"Loading table of contents..."))))}})})();