(()=>{"use strict";const t={tablet:768,mobile:481};let e,i=null;function n(){const e=document.querySelectorAll(".gutplus-toc");if(!e||0===e.length)return;const n=window.guttembergPlusSettings?.breakpoints||t,l=function(t,e){return t<=e.mobile?"mobile":t<=e.tablet?"tablet":"global"}(window.innerWidth,n);l!==i&&(i=l,e.forEach(t=>{t.setAttribute("data-gutplus-device",l)}))}function l(){const t=document.querySelectorAll(".gutplus-toc");t&&0!==t.length&&t.forEach(t=>{try{if(!t)return;const e=t.getAttribute("data-toc-id");if(!e)return;const i={tocId:e,filterMode:t.getAttribute("data-filter-mode")||"include-all",includeLevels:(t.getAttribute("data-include-levels")||"2,3,4,5,6").split(",").map(Number),includeClasses:t.getAttribute("data-include-classes")||"",excludeLevels:(t.getAttribute("data-exclude-levels")||"").split(",").map(Number).filter(Boolean),excludeClasses:t.getAttribute("data-exclude-classes")||"",depthLimit:parseInt(t.getAttribute("data-depth-limit")||"0",10)||null,includeAccordions:"false"!==t.getAttribute("data-include-accordions"),includeTabs:"false"!==t.getAttribute("data-include-tabs"),h1NumberingStyle:t.getAttribute("data-h1-numbering")||"decimal",h2NumberingStyle:t.getAttribute("data-h2-numbering")||"decimal",h3NumberingStyle:t.getAttribute("data-h3-numbering")||"decimal",h4NumberingStyle:t.getAttribute("data-h4-numbering")||"decimal",h5NumberingStyle:t.getAttribute("data-h5-numbering")||"decimal",h6NumberingStyle:t.getAttribute("data-h6-numbering")||"decimal",smoothScroll:"true"===t.getAttribute("data-smooth-scroll"),scrollOffset:parseInt(t.getAttribute("data-scroll-offset")||"0",10),autoHighlight:"true"===t.getAttribute("data-auto-highlight"),isCollapsible:"true"===t.getAttribute("data-collapsible"),initiallyCollapsed:"true"===t.getAttribute("data-initially-collapsed"),clickBehavior:t.getAttribute("data-click-behavior")||"navigate",enableHierarchicalIndent:"true"===t.getAttribute("data-enable-hierarchical-indent"),levelIndent:t.getAttribute("data-level-indent")||"1.25rem",showIcon:"false"!==t.getAttribute("data-show-icon"),iconClosed:t.getAttribute("data-icon-closed")||"▾",iconOpen:t.getAttribute("data-icon-open")||"none",iconRotation:parseInt(t.getAttribute("data-icon-rotation")||"180",10),includeH1:"false"!==t.getAttribute("data-include-h1"),includeH2:"false"!==t.getAttribute("data-include-h2"),includeH3:"false"!==t.getAttribute("data-include-h3"),includeH4:"false"!==t.getAttribute("data-include-h4"),includeH5:"false"!==t.getAttribute("data-include-h5"),includeH6:"false"!==t.getAttribute("data-include-h6")};!function(t,e){if(t&&e)try{const i=function(t){if(!t)return[];const e=t.getAttribute("data-toc-items");if(!e)return[];try{const t=decodeURIComponent(e),i=JSON.parse(t);if(Array.isArray(i))return i.filter(t=>!t.hidden).map((t,e)=>{const i=t.anchor||t.id||`heading-${e}`;return{anchor:i,id:i,text:t.text||"",level:t.level||2}}).filter(t=>t.id)}catch(t){}return[]}(t),n=function(t,e){const i=document.querySelector(".entry-content, .post-content, .page-content, article .content, main.content, .site-content article");if(!i)return[];const n=[];if(["h1","h2","h3","h4","h5","h6"].forEach(t=>{!1!==e[`include${t.toUpperCase()}`]&&n.push(t)}),0===n.length)return[];const l=i.querySelectorAll(n.join(", ")),r=[];if(l.forEach(t=>{if(t.closest(".gutplus-toc"))return;if(t.closest("header, footer, nav, aside, .sidebar, .widget"))return;const i=parseInt(t.tagName.charAt(1),10),n=t.classList.contains("accordion-heading"),l=t.classList.contains("tab-heading");if(n&&!e.includeAccordions)return;if(l&&!e.includeTabs)return;let a="";const c=t.querySelector(".accordion-title-text, .tab-button-text");a=c?c.textContent.trim():t.textContent.trim();const s=t.id||"",o=Array.from(t.classList);(function(t,e){const{filterMode:i,includeClasses:n,excludeClasses:l}=e;return"Include by class"===i?!!n&&n.split(",").some(e=>t.classes.includes(e.trim())):"Excluse by class"!==i||(!l||!l.split(",").some(e=>t.classes.includes(e.trim())))})({level:i,classes:o},e)&&r.push({level:i,text:a,id:s,classes:o,element:t})}),e.depthLimit){const t=Math.min(...r.map(t=>t.level));return r.filter(i=>i.level-t<e.depthLimit)}return r}(0,e),l=i&&i.length>0?function(t,e,i){if(!Array.isArray(t)||0===t.length)return e||[];const n=Array.isArray(e)?e:[],l=new Map;n.forEach(t=>{t&&t.id&&l.set(t.id,t)});const a=new Set;return t.map((t,e)=>{const c=t.anchor||t.id||`heading-${i?.tocId||"toc"}-${e}`;let s=l.get(c);return s||(s=n.find(e=>!(a.has(e)||t.level&&e.level!==t.level||r(e.text)!==r(t.text)))),s?(a.add(s),s.element&&s.element.id!==c&&(s.element.id=c),{...s,id:c}):{level:t.level||2,text:t.text||"",id:c,element:null}})}(i,n,e):n;if(!l)return;l.forEach((t,i)=>{try{t&&t.element&&!t.element.id&&(t.element.id=`heading-${e.tocId}-${i}`,t.id=t.element.id)}catch(t){}});const c=t.querySelector(".toc-list");if(c)try{!function(t,e,i){t.innerHTML="",t.style.setProperty("--toc-h1-numbering",i.h1NumberingStyle||"decimal"),t.style.setProperty("--toc-h2-numbering",i.h2NumberingStyle||"decimal"),t.style.setProperty("--toc-h3-numbering",i.h3NumberingStyle||"decimal"),t.style.setProperty("--toc-h4-numbering",i.h4NumberingStyle||"decimal"),t.style.setProperty("--toc-h5-numbering",i.h5NumberingStyle||"decimal"),t.style.setProperty("--toc-h6-numbering",i.h6NumberingStyle||"decimal"),t.classList.add("toc-hierarchical-numbering"),t.setAttribute("data-h1-numbering",i.h1NumberingStyle||"decimal"),t.setAttribute("data-h2-numbering",i.h2NumberingStyle||"decimal"),t.setAttribute("data-h3-numbering",i.h3NumberingStyle||"decimal"),t.setAttribute("data-h4-numbering",i.h4NumberingStyle||"decimal"),t.setAttribute("data-h5-numbering",i.h5NumberingStyle||"decimal"),t.setAttribute("data-h6-numbering",i.h6NumberingStyle||"decimal");let n=e.length>0?Math.min(...e.map(t=>t.level||6)):1;if("none"===(i.h1NumberingStyle||"decimal")&&n<=1&&(n=2),t.setAttribute("data-base-level",n),0===e.length)return void(t.innerHTML='<li class="toc-empty">No headings found.</li>');const l=document.createDocumentFragment(),r=i&&i.enableHierarchicalIndent,a=i&&i.levelIndent||"1.25rem",c=[];let s=null;e.forEach(t=>{const e=document.createElement("li");e.className=`toc-item toc-h${t.level}`;let i=0;if(r){if(null===s)i=0,c.push(t.level);else if(t.level>s)i=c.length,c.push(t.level);else if(t.level===s)i=c.length-1;else{for(;c.length>0&&c[c.length-1]>=t.level;)c.pop();i=c.length,c.push(t.level)}s=t.level}else i=t.level-1;i>0&&(e.style.paddingLeft=`calc(${i} * ${a})`);const n=document.createElement("a");n.href=`#${t.id}`,n.className="toc-link",n.textContent=t.text,n.setAttribute("data-heading-id",t.id),e.appendChild(n),l.appendChild(e)}),t.appendChild(l)}(c,l,e)}catch(t){}if(e.smoothScroll)try{!function(t,e){if(!t||!e)return;const i=t.querySelectorAll(".toc-link");i&&0!==i.length&&i.forEach(i=>{i&&i.addEventListener("click",n=>{try{n.preventDefault();const l=i.getAttribute("href");if(!l||l.length<=1)return;const r=l.slice(1),a=document.getElementById(r);if(!a)return;const c=function(t){if(!t)return!1;let e=!1;const i=t.closest(".gutplus-accordion");if(i){const t=i.querySelector(".accordion-title"),n=i.querySelector(".accordion-content");t&&n&&("true"===t.getAttribute("aria-expanded")||(t.click(),e=!0))}let n=null;return t.classList&&t.classList.contains("tab-button")?n=t:t.closest&&t.closest(".tab-heading")?n=t.closest(".tab-heading").querySelector(".tab-button"):t.querySelector&&(n=t.querySelector(".tab-button")),n&&("true"===n.getAttribute("aria-selected")||(n.click(),e=!0)),e}(a),s=()=>{let t=a;const i=a.classList&&a.classList.contains("tab-button"),n=a.closest&&a.closest(".tab-heading");if(i||n){const e=a.closest(".gutplus-tabs");e&&(t=e)}const l=a.closest&&a.closest(".accordion-heading"),r=a.classList&&a.classList.contains("accordion-title");if(l||r){const e=a.closest(".gutplus-accordion");e&&(t=e)}const c=t.getBoundingClientRect().top+window.pageYOffset-e.scrollOffset;window.scrollTo({top:c,behavior:"smooth"})};c?setTimeout(s,50):s(),history.pushState?history.pushState(null,null,`#${r}`):window.location.hash=r,a.focus({preventScroll:!0}),"navigate-and-collapse"===e.clickBehavior&&e.isCollapsible&&e.showIcon&&setTimeout(()=>{try{const e=t.querySelector(".toc-toggle-button"),i=t.querySelector(".toc-content"),n=t.querySelector(".toc-icon");if(e&&i&&(i.setAttribute("hidden","true"),e.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),n)){const t=e.getAttribute("data-icon-closed")||"▾";n.textContent=t,n.style.transform="rotate(0deg)"}}catch(t){}},600)}catch(t){}})})}(t,e)}catch(t){}if(e.autoHighlight)try{!function(t,e){if(!t||!e||0===e.length)return;const i=t.querySelectorAll(".toc-link");if(!i||0===i.length)return;const n=e.map(t=>t.element).filter(t=>t);if(0===n.length)return;const l=()=>{i.forEach(t=>{t&&t.classList.remove("active")})};let r=!1;const a=()=>{r||(window.requestAnimationFrame(()=>{try{const e=window.pageYOffset+100;let i=null;for(let t=n.length-1;t>=0;t--){const l=n[t];if(l&&void 0!==l.offsetTop&&e>=l.offsetTop){i=l;break}}i&&i.id?(e=>{if(!e)return;l();const i=t.querySelector(`.toc-link[data-heading-id="${e}"]`);i&&i.classList.add("active")})(i.id):l()}catch(t){}r=!1}),r=!0)};try{a()}catch(t){}window.addEventListener("scroll",a,{passive:!0})}(t,l)}catch(t){}if(e.isCollapsible)try{!function(t,e){if(!t||!e)return;const i=t.querySelector(".toc-toggle-button"),n=t.querySelector(".toc-content"),l=t.querySelector(".toc-icon");if(!i||!n)return;if(!(!1!==e.showIcon))return;const r=e.initiallyCollapsed;r?n.setAttribute("hidden","true"):(n.removeAttribute("hidden"),t.classList.add("is-open")),i.setAttribute("aria-expanded",!r),l&&!r&&a(l,!0);const c=()=>{try{n.hasAttribute("hidden")?(n.removeAttribute("hidden"),i.setAttribute("aria-expanded","true"),t.classList.add("is-open"),a(l,!0)):(n.setAttribute("hidden","true"),i.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),a(l,!1))}catch(t){}};i.addEventListener("click",c),i.addEventListener("keydown",t=>{t&&("Enter"!==t.key&&" "!==t.key||(t.preventDefault(),c()))})}(t,e)}catch(t){}}catch(t){}}(t,i)}catch(t){}})}function r(t=""){return t.toString().trim().toLowerCase()}function a(t,e){if(t)try{const i=t.getAttribute("data-icon-inactive"),n=t.getAttribute("data-icon-active"),l="true"===t.getAttribute("data-has-different-icons");if(!i)return;const r=JSON.parse(i),a=n?JSON.parse(n):null;if(l&&a){const i=e?a:r;if("char"===i.kind)t.textContent=i.value;else if("image"===i.kind)t.setAttribute("src",i.value);else if("library"===i.kind){const[e,n]=i.value.split(":");if("dashicons"===e){const e=t.querySelector(".dashicons");e&&(e.className=`dashicons dashicons-${n}`)}t.setAttribute("data-icon-library",e),t.setAttribute("data-icon-name",n)}}e?t.classList.add("is-rotated"):t.classList.remove("is-rotated")}catch(t){}}if(window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(n,100)}),"loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{try{n(),l()}catch(t){}});else try{l()}catch(t){}})();